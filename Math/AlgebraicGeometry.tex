\input{../style.tex}

\title{Algebraic Geometry}
\author{Jacob Denson}

\begin{document}

\pagenumbering{gobble}
\maketitle
\tableofcontents
\pagenumbering{arabic}

\part{Algebraic Curves}

The simplest geometric shapes are the circle and the line, and these were the first curves analyzed by the ancients. Even by the time of Euclid, it had been realized that a circle could be described as a locus of points at a fixed distance from a given point. In Descarte's analytic geometry, the theory of loci became even more important, because the loci defining these shapes became equations which could be analyzed algebraically to determine the nature of a geometric shape. For instance, in a particular coordinate system, a circle can be described as those points satisfying the polynomial relationship $X^2 + Y^2 = 1$. Similarily, a line can be described as the solution set to a relationship $aX + bY = c$, where $a$ and $b$ are not both zero. In terms of Euclid's geometry, these shapes are effectively all the tools that one can use to construct points -- a ruler corresponds to the ability to draw lines, and a compass the ability to draw circles, and we can determine their intersections. Algebraically, this means that in Euclidean geometry, we are only able to construct numbers satisfying linear and quadratic equations (linear equations are formed by the intersection of two lines, and quadratic equations by the intersection of circles, or by a circle and a line). These shapes seem a limited toolset to start, and because of this many problems proved unsolvable.
%
\begin{itemize}
    \item Squaring a Circle: Constructing a square with the same area as a circle. This essentially means constructing a line of length $\sqrt{\pi}$. This is impossible because $\sqrt{\pi}$ is a {\it trancendental number}, meaning it is not the root of any polynomial equation with coefficients in the rational numbers. In particular, this means that $\sqrt{\pi}$ cannot be constructed by taking intersections of lines and circles, or more generally, with any family of shapes whose intersections are specified as solutions to polynomial equations.
    \item Trisecting an arbitrary angle. Because we have the trigonometric identity $\sin 3x = 3 \sin x - 4 \sin^3 x$, projecting lines onto the $Y$ axis implies that trisecting an angle is equivalent to being able to find solutions to the equation $X = 3Y - 4Y^3$ for an arbitrary $X$. This is a cubic equation, and as such we cannot find the roots of this equation.
    \item Duplicating a Cube: Constructing a cube with volume twice that of a given cube. This essentially means constructing a line of length $\sqrt[3]{2}$. Since the smallest degree polynomial with coefficients in the rational numbers with $\sqrt[3]{2}$ as a root is $X^3 - 2$, we cannot construct $\sqrt[3]{2}$.
\end{itemize}
%
These were proved using the algebraic tools of Galois theory in the 19th century. However, in the 2000 years of trying to solve these problems, the Greeks didn't wait for algebra to solve their problems, instead introducing new tools into their geometry which enabled these problems to be solved.

In 350 BC, Menaechmus discovered the conic sections, which were generated as the intersections of cones with planes. Additionally, these sections could be classified by loci.
%
\begin{itemize}
    \item An ellipse is the locus of points for which the sum of distances between two other fixed points has a designated value. Analytically, this means that we can choose a coordinate system in which an ellipse is the set of solutions to
    %
    \[ Y^2 = pX - qX^2 \]
    \item A parabola is the locus of all points having equal distances between a given point and a line. Analytically this means that a parabola is specified as the solution set to
    %
    \[ Y^2 = pX \]
    \item A hyperbola is the locus of points for which the difference of distances between two other fixed points has a designated value.
    %
    \[ Y^2 = pX + qX^2 \]
\end{itemize}
%
Menaechmus immediately observed that if one was able to draw arbitrary conic sections in the plane, then one was able to duplicate a cube. Indeed, 

\chapter{Affine Algebraic Sets}

In Euclidean geometry, we find that most of the interesting geometric objects can be described as sets of points which can be described as solutions to some multivariate polynomial. Almost all of the elegant mathematical formulas occur as relations between polynomials.
%
\begin{itemize}
    \item The unit circle in the plane can be described as the set of points satisfying the equation $X^2 + Y^2 = 1$.
    \item A parabola can be described as those points satisfying $Y = X^2$.
    \item A hyperbola the solution set to $X^2 - Y^2 = 1$.
\end{itemize}
%
These are the basic conic sections which occur in high school geometry. The field of algebraic geometry is the study of solution sets to polynomial equations. It has surprising applications to modern physics, combinatorics, and certain parts of analysis.

From a Euclidean perspective, geometry is done in the $n$ dimensional affine space $\mathbf{A}^n$ with respect to some field $K$. After a certain choice of coordinates, $\mathbf{A}^n$ can be identified with $K^n$, as is customary in analytic geometry. $\mathbf{A}^1$ is referred to coloquially as the affine line, and $\mathbf{A}^2$ as the affine plane. Given a polynomial $f \in K[X_1, \dots, X_n]$, we can consider the zero set
%
\[ V(f) = \{ p \in \mathbf{A}^n : f(p) = 0 \} \]
%
which is the {\bf hypersurface} defined by $f$. We can also consider
%
\[ V(f,g) = \{ p \in \mathbf{A}^n: f(p) = 0\ \text{and}\ g(p) = 0 \} = V(f) \cap V(g) \]
%
which is the intersection of two hyperplanes, More generally, given a set $S$ of polynomials, we can consider the set $V(S)$, which consists of the points forming the set of common zeroes of all polynomials in $S$. These zero sets are called {\bf affine varieties}, and they are the main object of study in algebraic geometry.

\begin{example}
    The unit circle is the variety $V(X^2 + Y^2 - 1)$.
\end{example}

\begin{example}
    The curve consisting of the points $\{ (t,t^2,t^3): t \in K \}$ is the zero set of $V(Y^2 - X, Z - X^3)$, and is an affine variety in $\mathbf{A}^3$.
\end{example}

\begin{example}
    The set of points whose polar coordinates $(r,\theta)$ satisfy $r = \sin(\theta)$ (in addition to the point at the origin) form a variety. If these polar coordinates were induced by an affine coordinate system $(X,Y)$, then $r \sin(\theta) = Y$, and $r^2 = X^2 + Y^2$, so we may multiply the equation by $r$ to obtain the equation $X^2 + Y^2 = Y$. We find that the equation can be rearranged to $X^2 + (Y-1/2)^2 = 1/4$, so the solution set is just a circle of radius $1/2$ centered at $(0,1/2)$.
\end{example}

The class of affine varieties is interesting from the point of view of Euclidean geometry, because it is invariant under affine transformations, and many of the interesting shapes in Euclidean geometry can be identified with certain varieties through the tools of analytic geometry. Every affine transformation $T$ on $\mathbf{A}^n$ has an affine inverse $U = T^{-1}$, and $T$ maps $V(S)$ onto $V(U^*S)$, where $U^*: K[X_1, \dots, X_n] \to K[X_1, \dots, X_n]$ is the homomorphism $f \mapsto f \circ U$. It is easy to prove that $U^*$ preserves the degree of polynomials, which is useful to simplify calculations in certain situations. To see an example of this technique at work, define an {\bf affine plane curve} to be a hypersurface in $\mathbf{A}^2$.

\begin{theorem}
    An affine plane curve specified by a polynomial of degree $n$ intersects a line in at most $n$ places, unless the plane curve contains the entire line.
\end{theorem}
\begin{proof}
    Consider first the easy case where the line is just the $X$ axis. In this case, the zeroes of a polynomial $f(X,Y) = \sum a_{ij} X^iY^j$ which lie on the $X$ axis are in one to one correspondence with the set of solutions to the univariate polynomial $f(X,0) = \sum a_{i0} X^i$, which can have at most $\deg f(X,0) \leq \deg f = n$ separate points. Now in general, we can apply an affine transformation $T$ to any line to map it to the $X$ axis, and the points of $V(f)$ which lie on the line are in one to one correspondence with the points of $V(U^*f)$ which lie on the $X$ axis, where $U$ is the inverse of $T$. The theorem is then proved because $U^* f$ has the same degree as $f$.
\end{proof}

This theorem can be used to proved that certain planar curves are {\it not} affine varieties. We shall find that affine varieties are a very rigid class of objects, and because of this there are many deep theorems in the field.

\begin{example}
    The set of points $(x,y)$ in the real affine plane satisfying $y = \sin(x)$ cannot form a planar curve, because the curve intersects the $X$ axis infinitely often. If the points did form an algebraic variety $V(\mathfrak{a})$, where $\mathfrak{a}$ contains some nonzero polynomial $f$, then $V(f) \supset V(\mathfrak{a})$ would intersect the $X$ axis infinitely often, which is clearly impossible. This argument works for verifying that general varieties in the plane cannot intersect lines infinitely often, except in the trivial case where the variety is $\mathbf{A}^2$.
\end{example}

\begin{example}
    The complex sphere is the set of points $(z,w)$ in the complex affine plane satisfying $|z|^2 + |w|^2 = 1$, because the intersection of the complex sphere with the $z$ axis form a circle, which has infinitely many points. This justifies that the set cannot form a planar curve, and the same technique as in the last example shows the sphere cannot be an affine variety in general.
\end{example}

\begin{example}
    The set of points $\{ (\cos t, \sin t, t): t \in \mathbf{A}^3 \}$ over real affine space is not a variety, because it contains infinitely many points of the form $(1,0,\pi n)$, which lie on the same line.
\end{example}

There are some elementary observations we can make on the construction $V(S)$ from a set of polynomials $S$, which open the floodworks to reducing geometric problems on varieties to the ring theory of $K[X_1, \dots, X_n]$.
%
\begin{itemize}
    \item If $\mathfrak{a}$ is the smallest ideal containing $S$, then $V(S) = V(\mathfrak{a})$, so every affine variety can be described as the common zeroes of some ideal. This follows because for any set $X \subset \mathbf{A}^n$, the set $I(X)$ of polynomials which vanish over $X$ forms an ideal, and it is clear that in the case where $X = V(S)$, the ideal contains all elements of $S$, hence all elements of $\mathfrak{a}$.

    \item If we have a family $\{ \mathfrak{a}_\alpha \}$ of ideals, then $V(\bigcup \mathfrak{a}_\alpha) = \bigcap V(\mathfrak{a}_\alpha)$, so the intersection of an arbitrary family of varieties forms a variety.

    \item If $\mathfrak{a} \subset \mathfrak{b}$, then $V(\mathfrak{b}) \subset V(\mathfrak{a})$.

    \item For any two polynomials $f$ and $g$, $V(fg) = V(f) \cup V(g)$. More generally, if $\mathfrak{a}$ and $\mathfrak{b}$ are ideals, then $V(\mathfrak{a}\mathfrak{b}) = V(\mathfrak{a}) \cup V(\mathfrak{b})$, so finite unions of varieties are varieties.

    \item $V(0) = \mathbf{A}^n$, $V(1) = \emptyset$, and for any $a \in K^n$, $V(X_1-a_1,\dots,X_n - a_n)$ is just the singleton set $\{ a \}$. It follows from the last point that finite point sets are varieties.

    \item If $\mathfrak{a} \subset K[X_1, \dots, X_n]$ and $\mathfrak{b} \subset K[Y_1, \dots, Y_m]$, then these ideals generate ideals $\mathfrak{a}'$ and $\mathfrak{b}'$ in $K[X_1, \dots, X_n, Y_1, \dots, Y_m]$. The intersection $V(\mathfrak{a}') \cap V(\mathfrak{b}')$ corresponds to the set of points $(x,y)$ with $x \in V(\mathfrak{a})$ and $y \in V(\mathfrak{b})$, and we call this the {\bf product variety} $V(\mathfrak{a}) \times V(\mathfrak{b})$.
\end{itemize}
%
Because of these properties, we begin to see that the analysis of $K[X_1, \dots, X_n]$ and its ideals is key to the study of algebraic geometry. This is the key idea used to attack problems in algebraic geometry, and by the end of this section we will have seen this correspondence strengthened tenfold.

The space of all curves in $\mathbf{A}^2$ is infinite dimensional, and can only be effectively analyzed using the methods of functional analysis. However, we are not worried with this process in algebraic geometry, because even if a variety is specified by an ideal $\mathfrak{a}$ consisting of infinitely many polynomials, the variety is still a finitary object. Because $K[X_1, \dots, X_n]$ is {\it Noetherian} (this constitutes Hilbert's basis theorem), every ideal in $K[X_1, \dots, X_n]$ is finitely generated, and this means that for any set $S$ of polynomials, we can find polynomials $f_1, \dots, f_n$ generating the ideal generated by $S$, and then $V(S) = V(f_1, \dots, f_n)$ is the intersection of finitely many hyperplanes.

\begin{example}
    The varieties of $\mathbf{A}^1$ are exactly the finite point sets (other than the trivial variety $V(0) = \mathbf{A}^1$. First, note that since $K[X]$ is a principal ideal domain, we may assume we are considering the varieties of the form $V(f)$ for some particular polynomial $f(X) = \sum a_i X^i$. We know that $f(a) = 0$ if and only if $X - a$ is one of the prime factors of $f$. Since $f$ decomposes into finitely many prime factors, it follows that $V(f)$ can consist of at most $\text{deg}(f)$ points, a finite quantity. Thus the theory of one dimensional algebraic geometry is essentially trivial. This example shows that the countable union of affine varieties need not be a variety, because the countable union of finite sets need not be finite.
\end{example}

\begin{example}
    If $K$ is a finite field, then all subsets of $\mathbf{A}^n$ are varieties, because all subsets of $\mathbf{A}^n$ are finite subsets.
\end{example}

\begin{prop}
    If $f$ is a non constant polynomial over an algebraically complete field, $\mathbf{A}^n - V(f)$ contains infinitely many points for $n \geq 1$, and $V(f)$ contains infinitely many points for $n \geq 2$.
\end{prop}
\begin{proof}
    First, recall that every algebraically complete field $K$ must have infinitely many points, because if $K$ only contains $a_1, \dots, a_n$, we are unable to factor $(X - a_1) \dots (X - a_n) + 1$ into linear factors. It follows that $\mathbf{A}^1 - V(f)$ is infinite for any polynomial $f \in K[X]$, because $V(f)$ is finite. Given any polynomial $f \in K[X_1, \dots, X_n]$, there is a line in $\mathbf{A}^n$ upon which $f$ is not identically zero (for otherwise $f$ is equal to zero everywhere), and reducing our argument to the one dimensional case, we see that infinitely many points on this line cannot be zeroes of $f$. Arguing similarily, given any $f \in K[X_1, \dots, X_n]$, there is a plane upon which $f \neq 0$, and so we must show that any nonconstant $f(X,Y) = \sum a_{ij} X^i Y^j$ in the plane has infinitely many zeroes. For any line $[-a:1]$ through the origin, the polynomial takes the form $f(X,aX) = \sum a_{ij} a^j X^{i+j}$, and we know this polynomial has a zero unless it is constant, and if this occurs, then for any $1 \leq m < \infty$, $\sum a_{(m-k)k} a^k = 0$. Each of these are polynomials in $K[a]$, and at least one of these polynomials is nonzero, so we conclude there can only be finitely many values $a$ such that $[a:1]$ does not have an intersection with $V(f)$, and it follows that $V(f)$ is infinite because $K$ is infinite.
\end{proof}

The generation of an ideal $I(X)$ from a set $X$ is dual to the notion of generating a set $V(\mathfrak{a})$ from an ideal $\mathfrak{a}$. We make a few elementary observations about this operator.
%
\begin{itemize}
    \item It is clear that if $X \subset Y$, then $I(Y) \subset I(X)$.
    \item $I(\emptyset) = K[X_1, \dots, X_n]$, and $I(\mathbf{A}^n) = (0)$.
    \item $S \subset I(V(S))$ for any subset $S$ of polynomials, and $X \subset V(I(X))$.
    \item Combining the last two points, it follows that $V(I(V(S))) = V(S)$, because $V(S) \subset V(I(V(S)))$ follows from the second point of the last bullet, and $V(I(V(S))$ follows because $S \subset I(V(S))$, hence $V(S) \supset V(I(V(S))$. Similarily, we can argue that $I(V(I(X))) = I(X)$. Thus if $X$ is an algebraic set, then $V(I(X)) = X$, and if $\mathfrak{a}$ is an ideal equal to $I(X)$ for some set $X$, then $I(V(\mathfrak{a})) = \mathfrak{a}$.
    \item If $f^n \in I(X)$, then $f^n(p) = 0$ for all $p \in X$, which implies $f(p) = 0$ because $K$ is an integral domain, so that $f \in I(X)$. This means exactly that $I(X)$ is a {\it radical ideal} (a radical ideal $\mathfrak{a}$ is an ideal such that if $x^n \in \mathfrak{a}$ is in $x$. The smallest radical ideal containing some ideal $\mathfrak{a}$ is denoted $\text{Rad}(\mathfrak{a})$).
\end{itemize}

\begin{prop}
    For any two algebraic sets $V$ and $W$, $I(V) = I(W)$ if and only if $V = W$.
\end{prop}
\begin{proof}
    This follows because $V(I(V)) = V$, and $V(I(W)) = W$, so if $I(V) = I(W)$, then $V = V(I(V)) = V(I(W)) = W$.
\end{proof}

This is clearly not true if $V$ and $W$ are not algebraic sets. For instance, if $Y$ is the closure of some open set $X$, then $I(X) = I(Y)$, because polynomials are continuous so if they vanish on $X$, they certainly vanish on $Y$. Thus the class of algebraic sets are `separated' in some manner. The fact also shows that there is a certain correspondence between algebraic sets and radical ideals. If two algebraic sets determine the same radical ideal, they are equal. We will soon see that if we are working over an algebraically closed field, and $\mathfrak{a}$, $\mathfrak{b}$ are radical ideals, then $V(\mathfrak{a}) = V(\mathfrak{b})$ only if $\mathfrak{a} = \mathfrak{b}$, so there is a one two one correspondence between radical ideals and algebraic sets. This constitutes the theory of Hilbert's nullstellensatz, which we will come back to later in this chapter.

\begin{corollary}
    If $V$ is an algebraic set in $\mathbf{A}^n$, and $p \not \in V$, then there is a polynomial $f$ which vanishes on $V$, but with $f(p) = 1$.
\end{corollary}
\begin{proof}
    Since $V \neq V \cup \{ p \}$, and $V$ and $V \cup \{ p \}$ are both algebraic sets, $I(V) \neq I(V \cup \{ p \})$, and since $I(V) \supset I(V \cup \{ p \})$, there must be a polynomial $f$ which vanishes on $V$, but with $f(p) \neq 0$. It follows by normalizing that we can assume $f(p) = 1$.
\end{proof}

Similarily, by taking an algebraic set $V$, and $n$ points $p_1, \dots, p_n \not \in V$, we may apply this theorem to find polynomials $f_1, \dots, f_n \in I(V)$ with $f_i(p_j) = \delta_{ij}$. By considering linear combinations of the $f_i$, for any $a_{ij} \in K$, we can find $f_1, \dots, f_n \in I(V)$ with $f_i(p_j) = a_{ij}$. This shows the space of polynomials which vanish over $V$ has enough degrees of freedom to specify values on finitely many points in the set.

\section{Reducibility}

An algebraic variety $V$ is said to be {\bf reducible} if it can be written as the union of two proper algebraic subsets (these subsets need not be reducible). Otherwise, we say $V$ is {\bf irreducible}. Ring theory allows us to characterize this criterion in terms of the ideal generating the ideal.

\begin{prop}
    A variety $V$ is irreducible if and only if $I(V)$ is prime.
\end{prop}
\begin{proof}
    Suppose that $I(V)$ is not prime, so $fg \in I(V)$, whereas $f \not \in I(V)$, $g \not \in I(V)$. It follows that $f$ cannot be a scalar multiple of $g$, because $I(V)$ is a radical ideal. The fact that $f \not \in I(V)$ and $g \not \in I(V)$ means that $f$ and $g$ do not vanish on $V$, so $V(f, I(V))$ and $V(g, I(V))$ are proper subsets of $V$. But $V(f, I(V)) \cup V(g, I(V)) = V(fg, I(V)) = V(I(V)) = V$, so $V$ is reducible. Conversely, if $V = W \cup U$, where $W$ and $U$ are proper algebraic subsets of $V$, then $I(V)$ is a proper subset of both $I(W)$ and $I(U)$, so we may select $f$ vanishing on $W$, but not on $V$, and $g$ vanishing on $U$, but not on all of $V$. This means that $fg$ vanishes on $W \cup U = V$. Thus we have found $f,g \not \in I(V)$, but with $fg \in I(V)$, so $I(V)$ cannot be prime.
\end{proof}

\begin{example}
    The parabola $V(Y - X^2)$ is an irreducible variety over an infinite field. First, we must justify that $I(V(Y - X^2)) = (Y - X^2)$. If $f(X,Y) \in K[X,Y]$ is a polynomial, then we may apply the division algorithm, viewing $K[X,Y]$ as the one dimension polynomial ring $K[X][Y]$ with coefficients in $K[X]$, to obtain that $f(X,Y) = g(X,Y) (Y - X^2) + h(X)$. If $f(x,x^2) = 0$ for all $x \in K$, then $h(x) = 0$ for all $x \in K$, so if we are working over an infinite field we conclude that $h = 0$, and therefore $f$ is divisible by $Y - X^2$. Now we prove that $(Y - X^2)$ is prime, and since $K[X_1, \dots, X_n]$ is a unique factorization domain, it suffices to show that $Y - X^2$ is an irreducible polynomial. If $Y - X^2$ is the product of two polynomials, write these two polynomials as $Yf(X) + g(X)$ and $h(X)$ (if there are more $Y$'s in the factorization, they clearly cannot multiply to $Y - X^2$), where $f$ is monic. But then $(Yf + g)(h) = Yfh + gh$, so $fh = 1$, implying that $h$ is a unit.
\end{example}

As in most of mathematics, irreducible varieties have a nice theory, and we can use this theory to understand the varieties obtainable from the union of irreducible varieties. The idea is simple. If a variety $V$ is not irreducible, then we can break it apart into two proper algebraic subsets $V_1 \cup W_1$. If $V_1$ is not irreducible, we can break it apart into two proper subsets $V_2 \cup W_2$. If this process is guaranteed to terminate at some point (so that $V_n$ is eventually irreducible), we can recursively break apart varieties into irreducible varieties. The ring theoretic property we need to employ here is the fact that $K[X_1, \dots, X_n]$ is a {\it Noetherian ring} -- every ascending chain of ideals is guaranteed to terminate.

\begin{prop}
    Every variety is the finite union of irreducible varieties.
\end{prop}
\begin{proof}
    If this theorem did not hold, we have justified that we can find an infinite sequence $V_1 \supsetneq V_2 \supsetneq V_3 \dots$ of descending algebraic subsets. This implies that $I(V_1) \subsetneq I(V_2) \subsetneq I(V_3)$, an infinite ascending chain of ideals. Because $K[X_1, \dots, X_n]$ is Noetherian, this situation cannot occur, so $V_n$ must eventually be an irreducible variety, and this implies that the process of breaking reducible varieties in a decomposition must eventually yield a set of irreducible varieties.
\end{proof}

The last proposition guarantees the existence of a decomposition of an arbitrary variety $V$ into a finite union $\bigcup V_i$ of irreducible varieties. If $V_j \subset V_k$ for $j \neq k$, then we may remove $V_j$ from the union, and we still obtain a decomposition of $V$. We may therefore assume that no element of the decomposition is a subset of any other. Once we assume this, we obtain a unique decomposiiton. Suppose we have $\bigcup V_i = \bigcup W_i$, for two families of irreducible varieties, where none of the $V_i$ is a subset of the $V_j$, and none of the $W_i$ is a subset of the $W_j$. Then for each $i,j$, $V_i = (W_j \cap V_i) \cup (\bigcup_{k \neq j} W_k \cap V_i)$, and these finite intersections form varieties, so either $W_j \cap V_i = \emptyset$, or $W_j \cap V_i = V_i$. If $W_j \cap V_i = \emptyset$ for all $j$, then $V_i = V_i \cap \bigcup V_i = V_i \cap \bigcup W_i = \bigcup V_i \cap W_i = \emptyset$, which we assumed was impossible. Thus $V_i \subset W_j$ for some $j$. Similarily, we may apply this technique to conclude that $W_j \subset V_k$ for some $k$, and by assumption, we must have $k = i$, so $W_j = V_i$. By matching up elements of the decomposition, we conclude that the decomposition is unique. The elements of this decomposition are known as the {\bf irreducible components} of $V$.

\begin{example}
    Consider the variety $V(Y^4 - X^2, Y^4 - X^2Y^2 + XY^2 - X^3)$ in $\mathbf{C}^2$. Since $Y^4 - X^2 = (Y^2 - X)(Y^2 + X)$, and so
    %
    \begin{align*}
        Y^4 - X^2Y^2 + XY^2 - X^3 &= (Y + iX)(Y - iX)(Y-X)(Y+X)
    \end{align*}
    %
    Considering the zeroes which satisfy these equations on a case by case basis, we find that the variety is just the set of discrete points
    %
    \[ \{ (0,0), (1,1), (1,-1), (-1,-1), (-1,1), (-1,-i), (-1,i), (1,i), (1,-i) \} \]
    %
    and so the variety is a union of finitely many points, and this is the decomposition into irreducible factors.
\end{example}

\begin{example}
    The polynomial $Y^2 + X^2(X-1)^2$ is irreducible over $\mathbf{R}[X,Y]$, but factors into $(Y + iX(X-1))(Y - iX(X-1))$ over $\mathbf{C}[X,Y]$. The consequence is that even though $Y^2 + X^2(X-1)^2$ is an irreducible polynomial, the variety it generates is not irreducible, consisting of the two points $\{ (0,0), (1,0) \}$. This is the consequence of the fact that $I(V(Y^2 + X^2(X-1)^2) = (Y,X(X-1))$ is not a prime ideal.
\end{example}

\section{Classification of Planar Algebraic Sets}

It an interesting task to classify the algebraic subsets of $\mathbf{A}^2$, because it is the first nontrivial family of algebraic sets. Whereas the algebraic subsets of $\mathbf{A}^1$ are trivial, the plane contains numerous infinite families of varieties, such as parabolas, ellipses, hyperbolas, and elliptic curves. We begin with a simple observation.

\begin{theorem}
    If two polynomials $f(X,Y)$ and $g(X,Y)$ are relatively prime, then $V(f,g)$ consists of finitely many points.
\end{theorem}
\begin{proof}
    If $(f,g) = 1$ over $K[X,Y]$, then $(f,g) = 1$ over $K(X)[Y]$, and since $K(X)[Y]$ is a principal ideal domain, there are $a,b \in K(X)[Y]$ such that $af + bg = 1$. If $a(Y) = \sum a_i(X)Y^i$, and $b = \sum b_i(X) Y^i$, then we may find $c \in K[X]$ such that $ca, cb \in K[X,Y]$. This implies that $acf + bcg = c$, and so if $f(x,y) = g(x,y) = 0$, $c(x) = 0$, so only finitely many $X$ coordinates can appear among the entries of $V(f,g)$. By symmetry, finitely many $Y$ coordinates can also appear, so $V(f,g)$ in total can only have finitely many points.
\end{proof}

\begin{corollary}
    If $f(X,Y)$ is irreducible, and $V(f)$ is infinite, then $I(V(f)) = (f)$, and $V(f)$ is irreducible.
\end{corollary}
\begin{proof}
    If $g \in I(V(f))$, then $V(f,g) = V(f)$ is infinite, so $f$ and $g$ must have a common factor, hence $g$ must be a multiple of $f$ since $f$ is irreducible. We conclude that $I(V(f))$ consists only of multiples of $f$.
\end{proof}

\begin{corollary}
    The irreducible algebraic planar sets over an infinite field are exactly $\mathbf{A}^2$, $\emptyset$, singletons, and irreducible plane curves $V(f)$, where $f$ is irreducible and $V(f)$ is infinite.
\end{corollary}
\begin{proof}
    It is obvious that $\{ p \}$ is an irreducible set, as is $\emptyset$. Since $K$ is an infinite field, it is also obvious that $\mathbf{A}^2$ is irreducible, since $I(\mathbf{A}^2) = (0)$ is irreducible. Any other irreducible algebraic set must be of the form $V(f)$ for some irreducible polynomial $f$, and these are the irreducible planar curves provided $V(f)$ is infinite, by the last lemma.
\end{proof}

\begin{corollary}
    If we are working over an algebraically closed field, and $f$ is not irreducible, so we can write $f = f_1^{n_1} \dots f_m^{n_m}$ where each $f_i$ is irreducible, then the irreducible components of $V(f)$ are exactly the $V(f_i)$. We find that $I(V(f)) = (f_1, \dots, f_n)$.
\end{corollary}
\begin{proof}
    It is clear that
    %
    \[ V(f) = V((f_1^{n_1}) \dots (f_m^{n_m})) = \bigcup V(f_i^{n_i}) = \bigcup V(f_i) \]
    %
    and that each $f_i$ is irreducible. Since our field is algebraically closed, each $V(f_i)$ is infinite, If $V(f_i) \subset V(f_j)$, then $V(f_i,f_j) = V(f_j)$, and since $V(f_j)$ is infinite, this implies that $f_j$ divides $f_i$, which is impossible. Thus the $V(f_i)$ really are the decomposition of $V(f)$.
\end{proof}

\begin{example}
    Over the real numbers, $X^2 + Y^2 + 1$ is irreducible, yet no points in the real plane satisfy the equation $X^2 + Y^2 = 1$, so $I(V(X^2 + Y^2 + 1)) = \mathbf{R}[X,Y]$, which is not equal to $(X^2 + Y^2 + 1)$. Conversely, $X^2 + Y^2 + 1$ is also irreducible over the complex numbers, but the solution set to the polynomial forms an irreducible complex curve.
\end{example}

This is the first of many algebraic deficiencies of non algebraically closed fields, which is one of the reasons we will soon switch to studying algebraically closed fields.

\begin{example}
    As another example, note that the variety over the real numbers corresponding to $Y^2 - XY - X^2Y + X^3 = (Y - X)(Y - X^2)$ is the union of the line $Y = X$ and the parabola $Y = X^2$, and this is the decomposition into irreducible elements. The same is true for the decomposition over the complex numbers.
\end{example}

\begin{example}
    $Y^2 - X(X^2 - 1)$ is an irreducible polynomial, and its solution set is infinite, so $V(Y^2 - X(X^2 - 1))$ is an irreducible variety both over the real and complex numbers. In the topology of the Euclidean plane, $V(Y^2 - X(X^2 - 1))$ is disconnected though, the union of a shape isomorphic to the disjoint union of a circle and a line. On the other hand, over the complex numbers the solution set of $Y^2 - X(X^2 - 1)$ is a connected set which can be written as the union of $Y = \sqrt{X(X^2 - 1)}$, and since the Riemann surface corresponding to the square root operation is homeomorphic to $\mathbf{C}$, the solution set of this polynomial is also homeomorphic to $\mathbf{C}$ -- it has three singularities at $X \in \{ -1, 0, 1 \}$, and the solution set behaves like a cone around these solution sets.
\end{example}

\begin{example}
    Over the real numbers, $X^3 + X - X^2Y - Y = (X-Y)(X^2 + 1)$ is just the line $X = Y$, and hence $V(X^3 + X - X^2Y - Y)$ is irreducible. However, over the complex numbers, $X$ is the union of the three lines $X = Y$, $X = i$, and $X = -i$, and is therefore reducible.
\end{example}

\section{The Nullstellensatz}

We have seen the duality between affine varieties and radical ideals over the ring $K[X_1, \dots, X_n]$. Over algebraically closed fields, the correspondence between radical ideals and algebraic sets becomes exact. This is the content of Hilbert's Nullstellensatz theorem (the empty set theorem).

\begin{lemma}[Weak Nullstellensatz]
    If $K$ is an algebraically closed field, and if $\mathfrak{a}$ is a proper ideal of $K[X_1, \dots, X_n]$, then $V(\mathfrak{a}) \neq \emptyset$.
\end{lemma}
\begin{proof}
    We shall actually prove that if $\mathfrak{a}$ is a maximal ideal, then $V(\mathfrak{a})$ is a set containing a single point. Since we may always extend every ideal to a maximal ideal, this will prove the proposition. So we take $\mathfrak{a}$ to be any maximal ideal. Then $K[X_1, \dots, X_n]/\mathfrak{a} = L$ is a field, which can be viewed as a field extension of $K$ because we can embed $K$ as the set of constant polynomials in $K[X_1, \dots, X_n]$, and we then compose with the quotient homomorphism to obtain a map into $L$. We write $x_i \in L$ for the element of the field corresponding to $X_i$. If we know that the embedding of $K$ in $L$ gives an isomorphism between the two fields, then for each $x_i$ there is $a_i \in K$ with $x_i - a_i \in \mathfrak{a}$. But $(X_1 - a_1, \dots, X_n - a_n)$ is a maximal ideal in $K[X_1, \dots, X_n]$, because every polynomial in $K[X_1, \dots, X_n]/(X_1 - a_1, \dots, X_n - a_n)$ is congruent to an element of $K$, hence $\mathfrak{a} = (X_1 - a_1, \dots, X_n - a_n)$. Now we can conclude that $V(\mathfrak{a}) = \{ (a_1, \dots, a_n) \}$.
\end{proof}

To finish off the proof of the weak Nullstellensatz, it suffices to prove that if $K$ is an algebraically closed field, then for every field $L$, if there is a surjective homomorphism from $K[X_1, \dots, X_n]$ to a field extension $L$ of $K$ fixing elements of $K$, then $K = L$. This is an easy consequence of Zariski's lemma.

\begin{lemma}
    If $K[S_1, \dots, S_n]$ is a field, then it is a finite extension of $K$.
\end{lemma}
\begin{proof}
    We prove this by induction on $n$. For $n = 1$, this is a classical argument in Galois theory. To continue the induction, suppose we have proved the theorem for all fields of the form $K[S_1, \dots, S_m]$, where $m < n$. We may then apply induction to $K[S_1, \dots, S_n] = K(S_1)[S_2, \dots, S_n]$ to conclude that $K[S_1, S_2, \dots, S_n]$ is a finite extension of $K(S_1)$. This means that for every $S_i$ there are polynomials $a_{ij} \in K(S_1)$ such that $\smash{a_{0j} + a_{1j} S_j + \dots + S_j^{n_j} = 0}$. If we consider a polynomial $b \in K[S_1]$ large enough such that $a_{ij} b^j \in K[S_1]$ for all $i,j$, then we find that for each $S_j$, $bS_j$ is integral over $K[S_1]$, and it follows from the theory of integral extensions (in particular, that the set of integral elements form a subring of the ring) that for any $f \in K[X_1, \dots, X_n]$, $bf$ is integral over $K[S_1]$, and in particular $bS_1$ is integral over $K[S_1]$, implying that $S_1$ is algebraic over $K$, and therefore that $K(S_1)$ is a finite extension of $K$, hence $K[S_1, \dots, S_n]$ is a finite extension of $K$.
\end{proof}

Since all finite extensions of a field are algebraic over that field, we conclude that if $K$ is algebraically closed, then every field of the form $K[S_1, \dots, S_n]$ is an algebraic extension of $K$, and therefore $K[S_1, \dots, S_n] = K$. This finishes our proof of the weak nullstellensatz. We now consider the extension to the full nullstellensatz.

\begin{theorem}
    If $\mathfrak{a}$ is an ideal in $K[X_1, \dots, X_n]$, where $K$ is algebraically closed, then $I(V(\mathfrak{a})) = \text{Rad}(\mathfrak{a})$.
\end{theorem}
\begin{proof}
    We may assume that $\mathfrak{a}$ is generated by finitely many polynomials, so $\mathfrak{a} = (f_1, \dots, f_m)$.  Concretely, the nullstellensatz says that if $g \in I(V(f_1, \dots, f_m))$, then $g^n = \sum h_if_i$ for some $h_i \in K[X_1, \dots, X_n]$. Suppose that $g \in I(V(\mathfrak{a}))$. Consider the ideal $\mathfrak{b} = (f_1, \dots, f_m, X_{n+1}g - 1) \subset K[X_1, \dots, X_{n+1}]$. Then $V(\mathfrak{b}) = \emptyset$, since if $f_1(x) = \dots = f_n(x) = 0$, then $g(x) = 0$, so $x_{n+1}g(x) - 1 = -1$. The weak nullstellensatz implies that there are $a_i \in K[X_1, \dots, X_{n+1}]$ such that $\sum a_i f_i + b (X_{n+1}g - 1) = 1$. Introducing $Y = 1/X_{n+1}$, we may multiply the equation by $Y^N$ for a large enough $N$ so find that
    %
    \[ Y^N = \sum Y^N a_i f_i + b Y^{N-1}(g - Y) \]
    %
    Where the $Y$ in $Y^N a_i$  can $Y^{N-1}b$ can be used to cancel out all instances of $X_{n+1}$. Setting $Y = g$ gives the required algebraic equation over $K[X_1, \dots, X_n]$.
\end{proof}

\begin{corollary}
    There is a one to one correspondence between radical ideals and algebraic sets in affine space over an algebraically closed field.
\end{corollary}

\begin{corollary}
    If $\mathfrak{a}$ is a prime ideal, then it is also a radical non total ideal, so $V(\mathfrak{a}) \neq \emptyset$ is an irreducible algebraic variety, and there is a one to one correspondence with such prime ideals and irreducible varieties. The maximal ideals correspond to points in $\mathbf{A}^n$.
\end{corollary}

\begin{example}
    $V(Y^2 - X(X-1)(X-\lambda))$ is an irreducible planar curve in $\mathbf{A}^2$ in any algebraically closed field, because $Y^2 - X(X-1)(X-\lambda)$ is an irreducible polynomial. If the polynomial does factor, it factors as $(Y + f(X))(Y - f(X))$ where $-f(X)^2 = X(X-1)(X-\lambda)$, but then this equation has no solution because $X(X-1)(X-\lambda)$ isn't a square of a polynomial in $K[X]$, which is a unique factorization domain.
\end{example}

\begin{corollary}
    If $f \in K[X_1, \dots, X_n]$ has a decomposition as $f_1^{n_1} \dots f_m^{n_m}$, where $K$ is algebraically closed, then $V(f) = V(f_1 \dots f_n) = \bigcup V(f_i)$ is the decomposition of $f$ into its irreducible factors. There is a one to one correspondence (up to scalar multiples) between irreducible hyperplanes and irreducible polynomials.
\end{corollary}

It is clear that if $K$ is not an algebraically closed field, then the weak nullstellensatz cannot hold, because in one dimension, the weak nullstellensatz is exactly the condition that gives that $K$ is an algebraically closed field. Since $K[X]$ is a principal ideal domain, the theorem states that if $(f) \neq K[X]$, then $V(f) \neq 0$, which means that if $f$ is a non constant polynomial, then $f$ has a root. Correspondingly, none of the corollaries to the weak nullstellensatz hold in non algebraically closed fields either. Suppose $f$ is a polynomial without a root in $K$. Then $V(f) = V(K[X])$, yet $f$ and $K[X]$ are both radical ideals, so we don't obtain a one to one correspondence. $f$ and $K[X]$ are also prime, so the correspondence between irreducible varieties and prime ideals is not one to one.

\begin{example}
    If $q$ is a prime element of a unique factorization domain, then every prime ideal $\mathfrak{a} \subset (q)$ is either trivial or equal to $(p)$. To see this, assuming $\mathfrak{a} \neq (0)$ find a nonzero $p_1^{n_1} \dots p_m^{n_m} q^k \in \mathfrak{a}$ minimizing $k + \sum n_i$. Then we must have $k > 0$, so $q(p_1^{n_1} \dots p_m^{n_m} q^{k-1}) \in \mathfrak{a}$, and because of our minimization, $p_1^{n_1} \dots p_m^{n_m} q^{k-1} \not \in \mathfrak{a}$, so $q \in \mathfrak{a}$. This implies that if $V$ is an irreducible hyperplane, there is no irreducible variety containing $V$, except for $\mathbf{A}^n$ itself.
\end{example}

\begin{example}
    Sometimes, we have to be a bit clever to determine if an ideal is reducible. Consider the ideal $(X^2 - Y^3,Y^2 - Z^3)$ in $K[X,Y,Z]$, where $K$ is algebraically closed. Consider the homomorphism $f$ from $K[X,Y,Z]$ to $K[T]$ preserving elements of $K$, and with $X \mapsto T^9$, $Y \mapsto T^6$, and $Z \mapsto T^4$. Then certainly $(X^2 - Y^3, Y^2 - Z^3)$ is contained in the kernel of $f$. But an arbitrary element of $K[X,Y,Z]/(X^2 - Y^3, Y^2 - Z^3)$ can be denoted $a + bX + cY + dXY$, with $a,b,c,d \in K[Z]$, and if $a = \sum a_i Z^i$, $b = \sum b_i Z^i$, $c = \sum c_i Z^i$, $d = \sum d_iZ^i$, then $a + bX + cY + dXY$ maps to
    %
    \[ \sum a_i T^{4i} + \sum b_i T^{9 + 4i} + \sum c_i T^{6 + 4i} + \sum d_i T^{15 + 4i} \]
    %
    and since the terms of each sum occur over different residues mod four, $f(a + bX + cY + dXY) = 0$ if and only if $a + bX + cY + dXY = 0$, hence the kernel of $f$ is exactly $(X^2 - Y^3, Y^2 - Z^3)$. Since $K[T]$ is an integral domain, this shows that $(X^2 - Y^3, Y^2 - Z^3)$ is prime, and therefore that $V(X^2 - Y^3, Y^2 - Z^3)$ is an irreducible variety.
\end{example}

From now on, the fact that a field is algebraically closed is so integral that, unless otherwise mentioned, all field we discuss in the sequel will be assumed algebraically closed.

\section{Coordinate Rings}

Often, to study the structure of some space $X$, we look at the space of functions on $X$ with some particular property reflecting the structure of $X$. For instance, if $X$ is a topological space, we look at the space of continuous functions. If $X$ is the complex plane, we look at the space of holomorphic functions. Normally, these spaces of functions will turn out to have an algebraic structure, like that of a ring, or an algebra over a field, and determining this algebraic structure up to isomorphism often classifies the spatial structure of $X$. Viewing an algebraic variety $V$ as a space, it seems difficult to think of which functions on $V$ are the natural ones. Studying continuous functions on $V$ can give us certain topological information about the variety, such as connectedness, compactness, and so on, but this information doesn't seem very related to the definition of $V$ in terms of $K[X_1, \dots, X_n]$. To make the connection between $V$ and $K[X_1, \dots, X_n]$, we make a decision that the natural functions `should' be the polynomial functions. We define the {\bf coordinate ring} of $V$, denoted $K[V]$, to be the space of all functions which are the restriction of some polynomial function on $\mathbf{A}^n$.

Algebraically, $K[V]$ forms an algebra over $K$, where the functions in $K[V]$ corresponding to elements of $K$ correspond to the constant functions on $V$. We now offer an alternate description of the coordinate ring which is more amenable to algebraic manipulation. The homomorphism from $K[X_1, \dots, X_n]$ to $K^{\mathbf{A}^n}$ obtained by mapping a polynomial to the function it defines can be composed with the restriction homomorphism from $K^{\mathbf{A}^n}$ to $K^V$, and the image of this composition is exactly $K[V]$. Applying the first isomorphism theorem, we find that $K[V]$ is isomorphic to $K[X_1, \dots, X_n]$ modulo the kernel of the homomorphism. This kernel is exactly the space of polynomials which vanish over $V$, which we previously denoted $I(V)$, so we find that $K[V]$ is isomorphic to $K[X_1, \dots, X_n]/I(V)$.

\begin{example}
    If we are working over an infinite field, then the coordinate ring $K[\mathbf{A}^n]$ is equal to $K[X_1, \dots, X_n]$, because $I(\mathbf{A}^n) = 0$. This is well known in the univariate case. In general, if we have a nonzero polynomial $f(X_1, \dots, X_n,Y)$, then viewing the polynomial as a univariate polynomial in $Y$ with coefficients in $K(X_1, \dots, X_n)$, we conclude that there must be $y \in K$ with $f(X_1, \dots, X_n,y) \neq 0$, and by induction we conclude there are $x_1, \dots, x_n \in K$ with $f(x_1, \dots, x_n, y) \neq 0$. In particular, in an algebraically closed field this will always be true.
\end{example}

A {\bf subvariety} of a variety $V$ is an algebraic set which occurs as a subset of $V$. The Nullstellensatz tells us that the subvarieties of $V$ are in one to one correspondence with the radical ideals containing $I(V)$. Applying the fourth isomorphism, since the image of an ideal containing $I(V)$ is radical in $K[V]$ if and only if it is radical in $K[X_1,\dots,X_n]$, we find that the subvarieties of $V$ are in one to one correspondence with the radical ideals in $K[V]$. The points in $V$ are also in one to one correspondence with the maximal ideals containing $I(V)$. This is the first instance of the fact that we can view $V$ as an `algebraic space' independent of $\mathbf{A}^n$, in which `being a subvariety' corresponds to `being the locus of a radical ideal'. As another example, we note that if $I_V(W)$ is the ideal of functions in $K[V]$ vanishing on $W$, then $K[W]$ is isomorphic to $K[V]/I_V(W)$, so that quotienting by functions vanishing on a subvariety is a `natural' way to form a coordinate ring in an arbitrary variety, not just in an affine space. This is the first step in forming a `coordinate independent' way of defining varieties.

\begin{prop}
    $V$ is a finite variety if and only if $K[V]$ is a finite vector space over $K$, and in this case the dimension is equal to the number of points in the variety.
\end{prop}
\begin{proof}
    If $p_1, \dots, p_n \in V$, choose $f_1, \dots, f_n$ with $f_i(p_j) = \delta_{ij}$. Then $f_1, \dots, f_n$ are linearly independent in $K[V]$, because if $g = \sum \lambda_i f_i$ vanishes on $V$, then $g(p_j) = \sum \lambda_i f_i(p_j) = \lambda_j = 0$. In particular, if $V$ has infinitely many points, then $K[V]$ is an infinite dimensional vector space over $K$. Conversely, if $p_1, \dots, p_n$ are the only points in $V$, then $K[V]$ is spanned by the $f_i$, so $K[V]$ is finite dimensional.
\end{proof}

\begin{example}
    Consider the locus $V$ of the polynomials $Y^2 - X^2$ and $Y^2 + X^2$ over an algebraically closed field $K$. Since $(Y^2 - X^2, Y^2 + X^2) = (Y^2,X^2)$, the radical ideal of these polynomials is $(Y,X)$, and so $K[V] = K[X,Y]/(Y,X) \cong K$ is a one dimensional vector space over $K$. This makes sense, because $Y^2 - X^2 = (Y-X)(Y+X)$, so on $V$ we find $Y = X$ or $Y = -X$, and in either of these cases $Y^2 + X^2 = 0$ if and only if $X = Y = 0$.
\end{example}

Since the basic notion of algebraic geometry is a variety, the natural maps $f: \mathbf{A}^n \to \mathbf{A}^m$ should be those mapping varieties to varieties. Similarily, the natural maps between two varieties $V$ and $W$ are those such that the inverse image of a subvariety is a subvariety. These are the {\bf regular maps}. Of these maps a large family are given by the {\bf polynomial maps} $f: \mathbf{A}^n \to \mathbf{A}^m$, which are the maps such that each coordinate function $f_i: \mathbf{A}^n \to \mathbf{A}^1$ is induced by a polynomial. More generally, a map $f: V \to W$ between two varieties is a polynomial map if it is the restriction of a polynomial map between the two ambient spaces. If $f: X \to Y$ is a map between two sets, then it induces a map $f^*: K^Y \to K^X$ obtained by composition: $f^*(g) = g \circ f$. This map has many useful properties for our studies:
%
\begin{itemize}
    \item If $g: Y \to Z$ is another map, then $(g \circ f)^* = f^* \circ g^*$.
    \item If $f(X_0)$ is a subset of $Y_0$, then $f^*$ descends to a map from $K^{X_0}$ to $K^{Y_0}$, and this function respects the restriction homomorphisms.
    \item If $f: V \to W$ is a polynomial function, then $f^*$ maps functions in $K[W]$ to functions in $K[V]$. A polynomial map $f$ maps elements of $V$ into elements of $W$ if and only if $f^*$ maps $I(W)$ into $I(V)$.
    \item If $f: V \to W$ is a surjective map, then $f^*: K[W] \to K[V]$ is injective.
\end{itemize}
%
In fact, the algebra structure of $K[V]$ classifies $V$ as a variety, up to an application of a polynomial map.

\begin{prop}
    There is a one to one correspondence between polynomial maps between two varieties $V$ and $W$ and algebra homomorphisms from $K[W]$ to $K[V]$.
\end{prop}
\begin{proof}
    Given a homomorphism $T: K[W] \to K[V]$, we can define a polynomial map $f: V \to W$ by letting $f = (TX_1, \dots, TX_n)$, which is well defined over $V$. We claim that $Tg = g \circ f$ for all polynomials $g \in K[W]$. It is clear that the set of polynomials satisfying this equation include $1$ and $X_1, \dots, X_n$, and if $Tg_0 = g_0 \circ f$ and $Tg_1 = g_1 \circ f$, then $Tg_0g_1 = (g_0 \circ f)(g_1 \circ f) = (g_0g_1 \circ f)$. Since $1,X_1, \dots, X_n$ generate $K[V]$ as an algebra, we conclude that the equation is satisfied by all $g$. If $f$ is any polynomial map between two varieties, then $f^*(g) = g \circ f$, and the construction above reconstructs the function $f$, so we know there is a one to one correspondence.
\end{proof}

A polynomial map is an isomorphism if it is bijection, and its inverse is also a polynomial map. To stylize algebraic geometry in terms of its isomorphisms, the theory attempts to study those properties of varieties which are invariant under polynomial isomorphisms. We have argued that $K[V]$ is an isomorphism invariant of the variety $V$. Two varieties $V$ and $W$ are isomorphic if and only if $K[V]$ and $K[W]$ are isomorphic.

\begin{prop}
    The image of an irreducible variety under a polynomial map is an irreducible variety.
\end{prop}
\begin{proof}
    Let $f: V \to W$ be a surjective polynomial map between two varieties, and suppose that $W$ is reducible, so that we may write $W = W_1 \cup W_2$. Then we have a decomposition of $V$ as $V_1 = f^{-1}(W_1)$ and $V_2 = f^{-1}(W_2)$, and $V_1, V_2 \neq V$ because otherwise this would imply that either $W_1 = W$ or $W_2 = W$.
\end{proof}

\begin{example}
    We have seen that $\{ (t,t^2,t^3): t \in K \}$ is an affine variety, because it is the locus of the polynomials $X^2 = Y$ and $X^3 = Z$. Another way to see this is to note that the variety is the image of the polynomial map from $\mathbf{A}^1$ to $\mathbf{A}^3$ defined by $t \mapsto (t,t^2,t^3)$. It is irreducible because it is the image of $\mathbf{A}^1$, which is an irreducible variety. What's more, the variety is isomorphic to $\mathbf{A}^1$, because the embedding has a polynomial inverse $(x,y,z) \mapsto x$.
\end{example}

\begin{example}
    The locus $V$ of polynomials of the polynomials $XZ = Y^2$, $YZ = X^3$, and $Z^2 = X^2Y$ forms an irreducible variety over $\mathbf{C}$. Note that $Y^3 - X^4$ is in the ideal $(XZ - Y^2, YZ - X^3, Z^2 - X^2Y)$, and if $x,y \in K$ are picked such that $x^4 = y^3$, there is a unique $z \in K$ with $z = y^2/x = x^3/y$, unless $x = y = 0$. In this case, we conclude that $z = 0$ because $z^2 = x^2y$. Otherwise $z^2 = x^2y$ follows automatically because $z^2 = (y^2/x)(x^3/y)$.  Our arguments imply that the polynomial map $t \mapsto (t^3,t^4,t^5)$ is a surjective map from $\mathbf{A}^1$ onto $V$. For any $y \neq 0$, there are exactly four values of $t$ such that $t^4 = y$, and if $t$ is any solution then $it$, $-it$, and $-t$ form the other three solutions to the equation. Now if $x^4 = y^3$, then $x^4 = t^{12}$, and
    %
    \[ x^4 - t^{12} = (x - t^3)(x + t^3)(x - it^3)(x + it^3) \]
    %
    This implies that either $x = t^3$, $x = -t^3$, $x = it^3$, or $x = -it^3$. But by replacing $t$ with any of the other roots of the equation $t^4 = y$, we find that there is a unique value of $t$ such that $t^4 = y$ and $t^3 = x$. We conclude that the map $t \mapsto (t^3,t^4,t^5)$ is actually a bijection, and therefore the locus of irreducible. The same argument essentially shows that $V$ is irreducible in any algebraically closed field -- one must just take a bit of extra care when we are doing computations over a field of characteristic two.
\end{example}

\begin{example}
    For any $f \in K[V]$, where $V$ is some variety in $\mathbf{A}^n$, define the {\bf graph} $G(f)$ of $f$ to be the set of tuples $(a_1, \dots, a_{n+1}) \in \mathbf{A}^{n+1}$, where $(a_1, \dots, a_n) \in V$ and $a_{n+1} = f(a_1, \dots, a_n)$. $G(f)$ is isomorphic to $V$ under the projection map $(a_1, \dots, a_{n+1}) \mapsto (a_1, \dots, a_n)$, because for each $a_1, \dots, a_n$ the number $a_{n+1}$ is uniquely determined.
\end{example}

\begin{example}
    A bijective polynomial map need not be an isomorphism. Consider the polynomial map from $\mathbf{A}^1$ to $V(Y^2-X^3)$ defined by letting $f(t) = (t^3,t^2)$. Then $f$ is a bijection, but $f^*$ is not surjective, for it maps $X$ onto $t^3$, and $Y$ onto $t^2$, so $f^*(X^2) = f^*(Y^3)$, and the image of the map is therefore $K[t^3,t^2]$, which is a proper subset of $K[t]$.
\end{example}

As should be expected by a geometer, the isomorphisms of $\mathbf{A}^n$ contain the family of affine translations $x \mapsto Mx + b$, where $b \in \mathbf{A}^n$ and $GL_n(K)$. This is exactly the reason by $\mathbf{A}^n$ rather than $K^n$, because the isomorphisms mean that the particular choice of affine coordinates used to define varieties is of no real consequence to the affine geometry.

\begin{example}
    The affine subplanes of $\mathbf{A}^n$ are varieties known as {\bf linear subvarieties}. Any variety of the form $V(f_1, \dots, f_m)$, where each $f_i$ is of degree one, is a linear subvariety, in which case the subplane has dimension $n-m$. These subplanes are all isomorphic to $\mathbf{A}^{n-m}$.
\end{example}

\section{The Function Field of a Variety}

The ring $K[V]$ is an isomorphism invariant of $V$, but it is often difficult to work with. However, when $V$ is an irreducible variety, then $K[V]$ is an integral domain, because it is the quotient of $K[X_1, \dots, X_n]$ by a prime ideal. This means we can form the field of fractions, which we denote $K(V)$. The elements of $K(V)$ correspond to functions on $V$ defined except at certain singularity sets, known as the set of {\bf poles} of the function. Given $f \in K(V)$, we say $f$ is {\bf defined at} $p \in V$ if we may write $f = g/h$, where $h(p) \neq 0$. Then $g(p)/h(p)$ is defined irrespective of the choice of $g$ and $h$, for if $g_0/h_0 = g_1/h_1$, then $h_1g_0 = h_0g_1$, and so $h_1(p)g_0(p) = h_0(p)g_1(p)$, hence $g_0(p)/g_1(p) = h_0(p)/h_1(p)$. We define $\mathcal{O}_p(V)$ to be the subring of rational functions on $V$ which are defined at $p$.

\begin{example}
    Consider the circle $S^1$, specified by the irreducible polynomial $X^2 + Y^2 = 1$. Then $K(C)$ is isomorphic to the field of functions $K(t)$ in a single variable. Consider the map with $t = Y/(X - 1)$, the slope of the line from $(1,0)$ to $(X,Y)$. It suffices to show that we may write the coordinate functions $X$ and $Y$ in terms of $t$ in $K(C)$. We know that $Y = (X - 1)t$, and this implies that $X^2 + (X - 1)^2t^2 = 1$, telling us that $(1 + t^2)X^2 + (t^2 - 1 - 2t^2X) = 0$. We know that setting $X = 1$ gives one solution to this polynomial. Factoring, we obtain the polynomial equation
    %
    \[ \left( X - 1 \right) \left(X - \frac{t^2 - 1}{1 + t^2} \right) = (1 + t^2)X^2 + (t^2 - 1 - 2t^2X) = 0 \]
    %
    Since $K(t)[X]$ is an integral domain, and $X - 1 \neq 0$, we conclude that
    %
    \[ X = \frac{t^2 - 1}{1 + t^2} \]
    %
    We can also write $X = 1 + Y/t$, and substituting this into $X^2 + Y^2 = 1$ gives $(1 +t^2) Y^2 + 2tY = 0$. $Y = 0$ gives one root to this equation, and the polynomial factors into
    %
    \[ Y \left( Y + \frac{2t}{1 + t^2} \right) \]
    %
    and we obtain that
    %
    \[ Y = - \frac{2t}{1 + t^2} \]
    %
    This shows the correspondence from $K(t)$ to $K(C)$ is an isomorphism. The geometric meaning of this isomophism is that points on $C$ can be parameterized by a rational function of their slope, and this map is exactly
    %
    \[ t \mapsto \left( \frac{t^2 - 1}{1 + t^2}, \frac{-2t}{1 + t^2} \right) \]
    %
    gives such a parameterization. This is particularly applicable when we are trying to find the indefinite integrals of functions of the form $f(x,\sqrt{1-x^2})$, where $f$ is a rational function of two arguments, because the argument above shows that $f(x,\sqrt{1-x^2}) = g(t)$ for some rational function of a single variable, and we can integrate rational functions of a single variable quite easily. This technique essentially works on any planar curve of degree two, showing that the corresponding field of fractions is isomorphic to $K(t)$, and if we perform calculations over a curve of the form $Y^2 = aX^2 + bX + c$, then we can find indefinite integrals of rational functions $f(x,\sqrt{ax^2 + bx + c})$. This is known as the technique of Euler substitution.
\end{example}

\begin{example}
    The map $f: t \mapsto (\cos t, \sin t)$ is a surjective map from $\mathbf{A}^1$ to $S^1$, and the induced map $f^*$ gives an isomorphism between the coordinate ring $K[S^1]$ and the algebra of functions $\mathbf{R}[\cos t, \sin t]$, obtained by mapping $X$ to the function $\cos t$, and $Y$ to the function $\sin t$. Correspondingly, this implies that the field $K(S^1)$ of rational functions on $S^1$ is isomorphic to the ring $\mathbf{R}(\cos t, \sin t)$ of rational functions of the cosine and sine functions. This explains why the analysis of the functions $\cos t$ and $\sin t$ is often reduced to analysis of certain equations of algebra.
\end{example}

\begin{prop}
    The pole set of any $f \in K(V)$ is a subvariety of $V$. If $K$ is algebraically closed, then the only functions in $K(V)$ with no poles are elements of $K[V]$.
\end{prop}
\begin{proof}
    For any $f \in K(V)$, let $\mathfrak{a}$ be the ideal of all $h \in K[X_1, \dots, X_n]$ such that $hf \in K[V]$. Then $\mathfrak{a}$ contains $I(V)$, and so the pole set of $f$ is exactly $V(\mathfrak{a})$. If $f$ has no poles, then $V(\mathfrak{a}) = \emptyset$, so applying the nullstellensatz, we conclude that $\text{Rad}(\mathfrak{a}) = K[X_1, \dots, X_n]$, so that $1 = 1^n \in \mathfrak{a}$, so that $f \in K[V]$.
\end{proof}

An element of $K(V)$ can thus be considered a function on the complement of its pole set. If two functions $f = f_0/f_1$ and $g = g_0/g_1$ have the same pole set, and $f(x) = g(x)$ on the complement of this pole set, and $f_0(x) g_1(x) = g_0(x)f_1(x)$ holds for all $x \in V$ (because if $x$ is in the pole set, then $f_1(x) = g_1(x) = 0$). This means that $f_0g_1 = g_0f_1$ in $K[V]$, and thus $f = g$. This is good news, but the bad news is that to analyze the behaviour of $f$, we must look at its behaviour on the complement of an algebraic set, which need not be algebraic.

\begin{example}
    Consider the solution set $V$ to the polynomial $XW - YZ$ in $\mathbf{A}^4$. Then for each $X$ and $Y$, the set of $W$ and $Z$ satisfying $XW - YZ$ forms a line through the origin, except when $X = Y = 0$. Now $K[V] = K[X,Y,W,Z]/(XW - YZ)$, and so $K(V)$ contains the function $f = X/Y = Z/W$, which is defined at all points except where $Y = W = 0$. The ideal of possible denominators is equal to $(Y,W)$, because if $f(X/Y) \in K[V]$, then we can write $fX = Yg + [XW - YZ]h$ for some polynomials $g$ and $h$. Rearranging, we find $X[f-Wh] = Y[g-Zh]$, so $g - Zh$ is divisible by $X$, and we can write $g = Zh + Xg_1$ for some polynomial $g_1$. The equation then reads $fX = X[Yg_1 + Wh]$ hence $f = Yg_1 + Wh \in (Y,W)$.
\end{example}

\begin{example}
    Let $V$ be the locus of $Y^2 = X^2(X+1)$. Let us see where the function $Y/X$ is defined. The ideal of denominators of the function include $X$ and $Y$, because $Y(Y/X) = Y^2/X = X^2(X+1)/X = X(X+1)$, so $Y/X = X(X+1)/Y$. No element of $K$ can be a denominator, for if we have an equality of polynomials of the form $tY = Xg(X,Y) + [Y^2 - X^2(X+1)]h(X,Y)$ in $K[X_1, \dots, X_n]$, then $Y[t - Yh(X,Y)] = X[g(X,Y) - X(X+1)h(X,Y)]$, hence $g(X,Y) - X(X+1)h(X,Y)$ divides $Y$, and we can write $g(X,Y) = X(X+1)h(X,Y) + Yg_1(X,Y)$, hence $t = Xg_1(X,Y) + Yh(X,Y)$, which is impossible unless $t = 0$. Thus the pole set of $Y/X$ is exactly $X = Y = 0$. You might imagine that $Y^2/X^2$ has a smaller pole set than $Y/X$, but since $Y^2 = X^2(X+1)$ we can rewrite the function as $X^2(X+1)/X^2 = X+1$, so the function is defined everywhere!
\end{example}

The set of rational function $f$ in $\mathcal{O}_p(V)$ such that $f(p) = 0$ is called the {\bf maximal ideal} of $f$ at $p$, and is denoted by $\mathfrak{m}_p(V)$. It is called this because $\mathcal{O}_p(V)/\mathfrak{m}_p(V)$ is a field, isomorphic to $K$ as the kernel of the evaluation map $\text{ev}_p: \mathcal{O}_p(V) \to K$. The set of non units in $\mathcal{O}_p(V)$ is exactly $\mathfrak{m}_p(V)$, so $\mathfrak{m}_p(V)$ is the unique maximal ideal in $\mathcal{O}_p(V)$, so that $\mathcal{O}_p(V)$ is a local ring (it is one of the motivating example of a local ring). We shall find that all the properties which are `locally designated' around the point $p$ can be described in terms of $\mathcal{O}_p(V)$. As a subring of a field, is is an integral domain. What's more, it is Noetherian.

\begin{prop}
    $\mathcal{O}_p(V)$ is a Noetherian local domain.
\end{prop}
\begin{proof}
    We must show that every ideal in $\mathcal{O}_p(V)$. Consider an arbitrary ideal $\mathfrak{a}$. Since $K[V]$ is Noetherian, let $f_1, \dots, f_n$ generate the ideal $\mathfrak{a} \cap K[V]$ over $K[V]$. We claim that $f_1, \dots, f_n$ generate $\mathfrak{a}$ over $\mathcal{O}_p(V)$. For any $g \in \mathfrak{a}$, there is $h$ with $h(p) \neq 0$ such that $gh \in K[V]$, so that we can write $gh = \sum k_if_i$, and then $g = \sum (k_i/h) f_i$.
\end{proof}

\begin{prop}
    The proper radical ideals of $\mathcal{O}_p(V)$ are in one to one correspondence with subvarieties of $V$ passing through $p$. The proper prime ideals correspond to irreducible subvarieties containing $p$.
\end{prop}
\begin{proof}
    First, we show that there is a one to one correspondence between proper ideals of $\mathcal{O}_p(V)$ and ideals in $K[V]$ consisting only of functions vanishing at $p$. This is obtained by taking a correspondence by an ideal $\mathfrak{a}$ of $\mathfrak{O}_p(V)$ and ideals $\mathfrak{a} \cap K[V]$ in $K[V]$. If $\mathfrak{a}$ is a proper ideal of $\mathcal{O}_p(V)$, then $\mathfrak{a}$ is contained in $\mathfrak{m}_p(V)$, so $\mathfrak{a} \cap K[V]$ consists only of functions vanishing at $p$. Since the elements of $\mathfrak{a} \cap K[V]$ generate $\mathfrak{a}$ over $\mathcal{O}_p(V)$, $\mathfrak{a} \cap K[V] = \mathfrak{b} \cap K[V]$ if and only if $\mathfrak{a} = \mathfrak{b}$. Conversely, given an ideal $\mathfrak{a}$ in $K[V]$, $\mathcal{O}_p(V) \mathfrak{a}$ consists of functions of the form $f/g$, where $g(p) \neq 0$, and $f \in \mathfrak{a}$. This means that $\mathcal{O}_p(V) \mathfrak{a} \cap \mathfrak{a} = \mathfrak{a}$, so the correspondence really is one to one. Since $\mathfrak{a} \cap K[V]$ is a radical ideal when $\mathfrak{a}$ is a radical ideal, and conversely, if $\mathfrak{a} \cap K[V]$ is a radical ideal, and if $f^n/g^n \in \mathfrak{a}$, then $f^n \in \mathfrak{a} \cap K[V]$, hence $f \in \mathfrak{a} \cap K[V]$, so $f/g$ is in $\mathfrak{a}$. The Nullstellensatz implies that there is a one to one correspondence between proper radical ideals in $\mathcal{O}_p(V)$ and subvarieties of $V$ containing $p$. Similarily, if $\mathfrak{a}$ is a prime ideal, then $\mathfrak{a} \cap K[V]$ is a prime ideal, and if $\mathfrak{a} \cap K[V]$ is a prime ideal, then if $\mathfrak{a}$ is a prime ideal.
\end{proof}

\begin{prop}
    There is a one to one correspondence of polynomial maps $f: V \to W$ with $f(p) = q$ and homomorphisms $f^*: \mathcal{O}_q(W) \to \mathcal{O}_p(V)$.
\end{prop}
\begin{proof}
    Each polynomial map $f$ induces $f^*: K[W] \to K[V]$, which we may view as a map from $K[W]$ to $\mathcal{O}_p(V)$. If $g \in K[W]$ has $g(q) \neq 0$, then $(f^* g)(p) = (g \circ f)(p) = g(q) \neq 0$, so $g$ is invertible in $\mathcal{O}_p(V)$. Since $\mathcal{O}_q(W)$ can be seen as the ring of fractions of $K[V]$ by the multiplicative subset of functions which do not vanish at $q$, we find that there is a unique map from $\mathcal{O}_q(W)$ to $\mathcal{O}_p(V)$ agreeing with $f^*$. It is easy to see that $f^*$ is just the map obtained from composing elements of $\mathcal{O}_q(W)$ as functions. This implies that $f^*(\mathfrak{m}_q(W)) \subset \mathfrak{m}_p(V)$.
\end{proof}

If $T: \mathbf{A}^n \to \mathbf{A}^n$ is an affine isomorphism with $T(p) = q$, then it induces $T^*: \mathcal{O}_q(\mathbf{A}^n) \to \mathcal{O}_p(\mathbf{A}^n)$. $T^*$ is an isomorphism from $K[W]$ to $K[V]$, mapping the set of functions not vanishing at $q$ to the set of functions not vanishing at $p$, so in particular the induces isomorphism between the ring of fractions of the two rings by the corresponding multiplicative subset. More importantly, $T^*$ induces an isomorphism from $\mathcal{O}_q(W)$ to $\mathcal{O}_p(V)$ if $V$ and $W$ are arbitrary varieties containing $p$ and $q$ respectively.

\end{document}