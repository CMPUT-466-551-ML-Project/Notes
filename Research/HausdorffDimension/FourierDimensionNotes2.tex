\documentclass[12pt,reqno]{article}

%\documentclass[dvipsnames,letterpaper,12pt]{article}

\usepackage[margin = 1in]{geometry}
\usepackage{amsmath,amssymb,graphicx,mathabx,accents}
\usepackage{enumerate,mdwlist}

%\setlist[enumerate]{label*={\normalfont(\Alph*)},ref=(\Alph*)}

%\numberwithin{equation}{section}

\usepackage{amsthm}
\usepackage{verbatim}

\usepackage{nag}

\DeclareMathOperator{\minkdim}{\dim_{\mathbf{M}}}
\DeclareMathOperator{\hausdim}{\dim_{\mathbf{H}}}
\DeclareMathOperator{\lowminkdim}{\underline{\dim}_{\mathbf{M}}}
\DeclareMathOperator{\upminkdim}{\overline{\dim}_{\mathbf{M}}}
\DeclareMathOperator{\fordim}{\dim_{\mathbf{F}}}

\DeclareMathOperator{\lhdim}{\underline{\dim}_{\mathbf{M}}}
\DeclareMathOperator{\lmbdim}{\underline{\dim}_{\mathbf{MB}}}

\DeclareMathOperator{\RR}{\mathbf{R}}
\DeclareMathOperator{\ZZ}{\mathbf{Z}}
\DeclareMathOperator{\QQ}{\mathbf{Q}}
\DeclareMathOperator{\TT}{\mathbf{T}}

\DeclareMathOperator{\B}{\mathcal{B}}

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{exercise}[theorem]{Exercise}
\newtheorem{remark}[theorem]{Remark}

\DeclareMathOperator{\EE}{\mathbf{E}}
\DeclareMathOperator{\PP}{\mathbf{P}}

\DeclareMathOperator{\DQ}{\mathcal{Q}}
\DeclareMathOperator{\DR}{\mathcal{R}}

\newcommand{\psitwo}[1]{\| {#1} \|_{\psi_2(L)}}
\newcommand{\TV}[2]{\| {#1} \|_{\text{TV}({#2})}}








\title{Salem Sets Avoiding Rough Configurations}
\author{Jacob Denson}

\begin{document}

\maketitle

Geometric measure theory explores the relationship between the geometry of a subset of Euclidean space, and regularity properties of the family of Borel measures supported on that set. From the perspective of harmonic analysis, it is often popular to explore what structural information can be gathered from the Fourier analytic properties of measures supported on a set. In this paper, we study the relationship between the Fourier analytic properties of a set and the existence of patterns on the set. In particular, given a `rough pattern', in the sense of \cite{OurPaper}, we construct a family of sets which generically avoids this pattern, and which supports measures with fast Fourier decay.

A useful statistic associated with any Borel set $E \subset \RR^d$ is it's \emph{Fourier dimension}. Given a finite Borel measure $\mu$ on $\RR^d$, we define it's Fourier dimension, $\fordim(\mu)$, to be the supremum of all $s \in [0,d]$ such that
%
\begin{equation} \label{fordim}
    \sup \left\{ |\widehat{\mu}(\xi)| |\xi|^{s/2} : \xi \in \RR^d \right\} < \infty.
\end{equation}
%
The Fourier dimension of a Borel set $E \subset \RR^d$, denoted $\fordim(E)$, is then the supremum of $\fordim(\mu)$, over all Borel probability measures $\mu$ supported on $E$. A particularly tractable family of sets in this scheme are \emph{Salem sets}, those sets whose Fourier dimension agrees with their Hausdorff dimension. Most classical fractal sets are not Salem, often having Fourier dimension zero. Nonetheless, the sets we construct in this paper are Salem.

\begin{theorem} \label{maintheorem}
    Let $0 \leq \alpha < dn$, and let $Z \subset \RR^{dn}$ be a countable union of compact sets, each with lower Minkowski dimension at most $\alpha$. Then there exists a compact Salem set $X \subset [0,1]^d$ with dimension
    %
    \[ \beta = \min \left( \frac{nd - \alpha}{n-1}, d \right) \]
    %
    such that for any distinct points $x_1, \dots, x_n \in X$, $(x_1, \dots, x_n) \not \in Z$. Moreover, there is a measure $\mu$ supported on $X$ such that for each $\xi \in \RR^d$,
    %
    \[ |\widehat{\mu}(\xi)| \leq \log(1 + |\xi|)^{1/2} |\xi|^{-\beta}. \]
\end{theorem}

\begin{remark}
    Theorem \ref{maintheorem} strengthens the main result of \cite{OurPaper}. Unlike in \cite{OurPaper}, the case of the problem $0 \leq \alpha < d$ is still interesting, since the trivial construction $X - \pi(Z)$ is not necessarily a Salem set.
\end{remark}

A well-known result in this pattern avoidance setting is that sets with large Fourier dimension satisfy many algebraic relations. More precisely, if integer coefficients $m_1, \dots, m_n \in \ZZ$ are fixed, and we consider a compact set $X \subset \RR$ with $\fordim(X) > 2/n$, then the sum set $m_1 X + \dots + m_n X$ contains an open interval. It follows by a slight modification of these coefficients that if $X \subset \RR$ and $\fordim(X) > 2/n$, then there exists $m_1, \dots, m_n \in \ZZ$, distinct points $x_1, \dots, x_n \in X$, and an additional integer $a \in \ZZ$, such that
%
\begin{equation} \label{intequation}
    m_1 x_1 + \dots + m_n x_n = a.
\end{equation}
%
It is an interesting to determine how tight this result is. In \cite{Korner2}, T.W. K\"{o}rner constructs a set $X$ with Fourier dimension $1/(n-1)$ such that for non-zero $m \in \ZZ^n$, and $a \in \ZZ$, $X$ does not contain distinct points $x_1, \dots, x_n$ solving \eqref{intequation}. If, for each nonzero $m \in \ZZ^n$ and $a \in \ZZ$, we consider the set
%
\[ Z_{m,a} = \left\{ (x_1, \dots, x_n) \in [0,1]^n : m_1x_1 + \dots + m_n x_n = a \right\}, \]
%
then $Z_{m,a}$ is a subset of an $n-1$ dimensional hyperplane, and thus can be easily seen to have Minkowski dimension $n-1$. It follows that we can apply \ref{maintheorem} to $Z = \bigcup \{ Z_{m,a} : m \neq 0, a \in \ZZ \}$ to obtain a Salem set $X \subset [0,1)$ of dimension
%
\[ \frac{n - (n-1)}{n - 1} = \frac{1}{n-1}, \]
%
such that $(x_1, \dots, x_n) \not \in Z$ for each distinct $x_1, \dots, x_n \in X$. Thus $X$ avoids solutions to $\eqref{intequation}$ for all nonzero $m \in \ZZ^n$ and $a \in \ZZ$. Thus we see Theorem \ref{maintheorem} generalizes K\"{o}rner's result, and thus shows the result depends little on the arithmetic properties of the pattern K\"{o}rner avoids, but rather, depends only on the `thickness' of the family of tuples $(x_1, \dots, x_n)$ satisfying the pattern.

Since we are working with compactly supported sets avoiding patterns, working in $\RR^d$ is not significantly different from working in a periodic domain $\TT^d = \RR^d / \ZZ^d$, which has the advantage of being compact. For a finite measure $\mu$ on $\TT^d$, we can define it's Fourier dimension $\fordim(\mu)$ as the supremum of all $0 \leq s \leq d$ such that
%
\begin{equation} \label{fordimtorus}
    \sup_{\xi \in \ZZ^d} |\widehat{\mu}(\xi)| |\xi|^{s/2} < \infty.
\end{equation}
%
We can then define the Fourier dimension of any Borel set $E \subset \TT^d$ as the supremum of $\fordim(\mu)$, over all Borel measures $\mu$ supported on $E$. Similarily, $\TT^d$ has a natural quotient metric induced from $\RR^d$, so we can consider open balls $B_\varepsilon(x + \ZZ^d)$, and thus define the Hausdorff dimension of finite Borel measures and sets on $\TT^d$. It is a simple consequence of the Poisson summation formula that if $\mu$ is a compactly supported measure on $\RR^d$, then \eqref{fordim} is equivalent to the more discrete condition
%
\begin{equation} \label{discretefordim}
    \sup_{\xi \in \ZZ^d} |\widehat{\mu}(\xi)| |\xi|^{s/2} < \infty.
\end{equation}
%
A proof is given in \cite[Lemma 39]{myThesis}. In particular, if $\mu^*$ is the \emph{periodization} of $\mu$, i.e. the measure on $\TT^d$ such that for any $f \in C(\TT^d)$,
%
\[ \int_{\TT^d} f(x)\; d\mu^*(x) = \int_{\RR^d} f(x + \ZZ^d)\; d\mu(x), \]
%
then \eqref{discretefordim} implies $\fordim(\mu^*) = \fordim(\mu)$. Since $\mu$ is compactly supported, it is also simple to see that $\hausdim(\mu^*) = \hausdim(\mu)$. Thus Theorem \ref{maintheorem} is clearly equivalent to it's periodic variant, introduced below.

\begin{theorem} \label{periodictheorem}
    Let $0 \leq \alpha < dn$, and let $Z \subset \TT^{dn}$ be a countable union of compact sets, each with lower Minkowski dimension at most $\alpha$. Then there exists a compact Salem set $X \subset \TT^d$ with dimension
    %
    \[ \beta = \min \left( \frac{nd - \alpha}{n-1}, d \right) \]
    %
    such that for any distinct points $x_1, \dots, x_n \in X$, $(x_1, \dots, x_n) \not \in Z$. Moreover, there is a measure $\mu$ supported on $X$ such that for each $\xi \in \ZZ^d$,
    %
    \[ |\widehat{\mu}(\xi)| \leq \log(1 + |\xi|)^{1/2} |\xi|^{-\beta}. \]
\end{theorem}

To construct our set, we rely on a Baire-category argument for the purpose of our construction. Thus we consider a complete metric space $\mathcal{X}$, whose elements consist of pairs $(E,\mu)$, where $E$ is a subset of $\TT^d$, and $\mu$ is a probability measure supported on $E$. We then show that for \emph{quasi-all} elements $(E,\mu) \in \mathcal{X}$, the set $E$ is pattern avoiding, and for each $\xi \in \ZZ^d$,
%
\[ |\widehat{\mu}(\xi)| \lesssim \log(1 + |\xi|)^{1/2} |\xi|^{-\beta}, \]
%
in the sense that the set of pairs $(E,\mu)$ which do not satisfy these properties is a set of first category in $\mathcal{X}$. It follows that Theorem \ref{periodictheorem} holds in a `generic' sense for elements of $\mathcal{X}$.

Once we have setup the appropriate metric space $\mathcal{X}$, our approach is quite similar to the construction in \cite{OurPaper}, relying on a random selection procedure, which is now exploited to give high probability bounds on the Fourier transform of the measures we study. The use of the Baire category approach in this paper, rather than an algorithmic, `nested set' approach, is mostly of an aesthetic nature, avoiding the complex queuing method and dyadic decomposition strategy required in the nested set approach; our approach can, with some care, be converted into a queuing procedure like in \cite{OurPaper}. But the Baire category argument makes our proof simpler to read, giving us the `infinitisimal argument' for free from the discrete case analysis, and has the advantage that it indicates that Salem sets of a specified dimension `generically' avoid a given rough pattern. Moreover, the proof of the Baire category theorem is in some senses, `hidden' in the queuing method, so the two methods are roughly equivalent.

\section{Notation} \label{notationSection}

\begin{itemize}
    \item For a positive integer $N$, we let $[N] = \{ 1, \dots, N \}$.

    \item Given a complete metric space $\Omega$, $x \in \Omega$, and $\varepsilon > 0$, we shall let $B_\varepsilon(x)$ denote the open ball of radius $\varepsilon$ around $x$. For a given set $E \subset \Omega$ and $\varepsilon > 0$, we let
    %
    \[ E_\varepsilon = \bigcup_{x \in E} B_\varepsilon(x), \]
    %
    denote the \emph{$\varepsilon$-thickening} of the set $E$. A subset of $\Omega$ is of \emph{first category} in $\Omega$ if it is the countable union of closed sets with nonempty interior. We say a property holds \emph{quasi-always}, or a property is \emph{generic} in $\Omega$ if the set of points in $\Omega$ failing to satisfy that property form a set of first category.

    \item We let $\TT^d = \RR^d/\ZZ^d$. Given $x \in \TT$, we let
    %
    \[ |x| = \min \{ |x + n| : n \in \ZZ \}, \]
    %
    and for $x \in \TT^d$, we let
    %
    \[ |x| = \sqrt{|x_1|^2 + \dots + |x_d|^2}. \]
    %
    The canonical metric on $\TT^d$ is then $d(x,y) = |x - y|$, for $x,y \in \TT^d$.

    \item Suppose $\mathbf{E} = \TT^d$ or $\mathbf{E} = \RR^d$. For $\alpha \in [0,d]$ and $\delta > 0$, we define the Hausdorff content of a Borel set $E \subset \mathbf{E}$ as
    %
    \[ H^\alpha_\delta(E) = \inf \left\{ \sum_{i = 1}^\infty \varepsilon_i^\alpha : E \subset \bigcup_{i = 1}^\infty B_{\varepsilon_i}(x_i)\ \text{and $\varepsilon_i \leq \delta$ for all $i \in \mathbf{N}$} \right\}. \]
    %
    The $\alpha$ dimensional Hausdorff measure of $E$ is then
    %
    \[ H^\alpha(E) = \lim_{\delta \to 0} H^\alpha_\delta(E). \]
    %
    The Hausdorff dimension $\hausdim(E)$ of a Borel set $E$ is then the infinum over all $s \in [0,d]$ such that $H^s(E) = \infty$, or alternatively, the supremum over all $s \in [0,d]$ such that $H^s(E) = 0$. Frostman's lemma says that if we define the Hausdorff dimension $\hausdim(\mu)$ of a finite Borel measure $\mu$ as the supremum of all $s \in [0,d]$ such that
    %
    \begin{equation} \label{hausdim}
        \sup \left\{ \mu(B_\varepsilon(x)) \cdot \varepsilon^{-\alpha} : x \in \RR^d, \varepsilon > 0 \right\} < \infty,
    \end{equation}
    %
    then $\hausdim(E)$ is the supremum of $\hausdim(\mu)$, over all Borel probability measures $\mu$ supported on $E$, analogous to the definition of the Fourier dimension of a set $E$ given in the introduction.

    We define the lower and upper Minkowski dimension of a compact Borel set $E \subset \mathbf{E}$ as
    %
    \[ \lowminkdim(E) = \liminf_{\varepsilon \to 0} \log_\varepsilon|E_\varepsilon| \quad\text{and}\quad \upminkdim(E) = \limsup_{\varepsilon \to 0} \log_\varepsilon |E_\varepsilon| \]
    %
    respectively.

    \item We will need to consider a standard mollifier. Throughout the paper, we fix a smooth probability density $\phi \in C^\infty(\TT^d)$ such that $\phi(x) = 0$ for $|x| \geq 2/5$, and such that for each $x \in \TT^d$
    %
    \[ \sum_{k \in \{ 0, 1 \}^d} \phi(x + k/2) = 2^d. \]
    %
    For each $\varepsilon \in (0,1)$, we can then define $\phi_\varepsilon \in C^\infty(\TT^d)$ by writing
    %
    \[ \phi_\varepsilon(x) = \begin{cases} \varepsilon^{-d} \phi(x/\varepsilon) &: |x| < \varepsilon, \\ 0 &: \text{otherwise}. \end{cases} \]
    %
    Then $\phi_\varepsilon$ is a smooth probability density, $\phi_\varepsilon(x) = 0$ for $|x| \geq \varepsilon$, and if $\varepsilon = 1/N$, and $x \in \TT^d$,
    %
    \begin{equation} \label{equation5550002352124124512}
        \sum_{k \in [2N]^d} \phi_{1/N}(x + k/2N) = (2N)^d.
    \end{equation}
    %
    As $\varepsilon \to 0$, $\phi_\varepsilon$ converges weakly to the Dirac delta function at the origin, so that for each $k \in \ZZ^d$,
    %
    \begin{equation} \label{approximationtoidentitypointwiseconvergence}
        \lim_{\varepsilon \to 0} \widehat{\phi_\varepsilon}(k) = 1.
    \end{equation}
    %
    Moreover, for each $\alpha > 0$, there exists $C_\alpha > 0$ such that for all $\varepsilon > 0$ and non-zero $k \in \ZZ^d$,
    %
    \begin{equation} \label{molificationdecaybound}
        |\widehat{\phi_\varepsilon}(k)| \leq \frac{C_\alpha}{\varepsilon^\alpha |k|^\alpha}.
    \end{equation}

    \begin{comment}

    \item Our random construction involves a probabilistic concentration of measure argument. Define a convex function $\psi_2: [0,\infty) \to [0,\infty)$ by setting
    %
    \[ \psi_2(t) = e^{t^2} - 1, \]
    %
    The function $\psi_2$ induces an Orlicz norm on the family of scalar valued random variables over a probability space by setting, for each random variable $X$,
    %
    \[ \psitwo{X} = \inf \left\{ A \in (0,\infty) : \EE(\psi_2(|X|/A)) \leq 1 \right\}. \]
    %
    The family of random variables with $\psitwo{X} < \infty$ are known as \emph{subgaussian random variables}. Here are the important properties of subgaussian random variables which we use in this paper:
    %
    \begin{itemize}
        \item If $\psitwo{X} \leq A$, then for each $t \geq 0$,
        %
        \[ \PP \left( |X| \geq t \right) \leq 10 \exp \left( -t^2/10A^2 \right). \]
        %
        Thus Subgaussian random variables have Gaussian tails.

        \item If $|X| \leq A$ almost surely, then $\psitwo{X} \leq 10 A$. Thus bounded random variables are subgaussian.

    %\item (Centering) For any random variable $X$,
    %
    %\[ \psitwo{X - \EE(X)} \lesssim \psitwo{X}. \]
    
    %\item (Union Bound) If $X_1, \dots, X_N$ are random variables, then
    %
    %\[ \psitwo{X_1 + \dots + X_N} \leq \psitwo{X_1} + \dots + \psitwo{X_N}. \]
    
        \item If $X_1, \dots, X_N$ are \emph{independent}, then
        %
        \[ \psitwo{X_1 + \dots + X_N} \leq 10 \left( \psitwo{X_1}^2 + \dots + \psitwo{X_N}^2 \right)^{1/2}. \]
        %
        This is an equivalent way to state \emph{Hoeffding's Inequality}, and we refer to an application of this inequality as an application of Hoeffding's inequality.
    \end{itemize}
    %
    Roughly speaking, if $X$ is a random variable with $\psitwo{X} \leq A$, we can think of $X$ as being sharply concentrated in the region $[-A,A]$. The Orlicz norm thus provides a convenient way to quantify concentration phenomena.
    %
    \begin{remark}
        The constants involved in these statements are suboptimal, but will suffice for our purposes. Proofs can be found in Chapter 2 of \cite{Vershynin}.
    \end{remark}

    \end{comment}
\end{itemize}

\section{A Complete Metric Space of Salem Sets}

Let us construct a metric space appropriate for our task. We proceed analogously to \cite{Korner2}. We shall form our metric space as a combination of two simpler metric spaces:
%
\begin{itemize}
    \item We let $\mathcal{E}$ denote the family of all compact subsets of $\TT^d$. If, for two compact sets $E,F \in \mathcal{E}$, we consider their Hausdorff distance
    %     
    \[ d_H(E,F) = \inf \{ \varepsilon > 0 : E \subset F_\varepsilon\ \text{and}\ F \subset E_\varepsilon \}, \]
    %
    then $(\mathcal{E},d_H)$ forms a complete metric space.

    \item Given any positive sequence of real numbers $\{ A(k) : k \in \ZZ^d \}$, we let $M(A)$ consist of the class of all finite Borel measures $\mu$ supported on $\TT^d$ such that the quantity
    %
    \[ \| \mu \|_{M(A)} = \sup_{\xi \in \ZZ^d} \frac{|\widehat{\mu}(\xi)|}{|A(\xi)|} \]
    %
    is finite. Then $\| \cdot \|_A$ is a norm, and $(M(A), \| \cdot \|_A)$ is a Banach space.
    %It is important to note that if there is a sequence of measures $\mu_k \in M(A)$ and $\mu \in M(A)$ such that
    %
    %\[ \lim_{k \to \infty} \| \mu_k - \mu \|_A = 0, \]
    %
    %then the sequence $\{ \mu_k \}$ converges weakly to $\mu$.

    In our argument, we will assume that the choice of $\{ A(\xi) \}$ is such that for each $\varepsilon > 0$ there exists $C_\varepsilon > 0$ such that for each $\xi \neq 0$,
    %
    \begin{equation} \label{dimensionbetasequencecondition}
        \frac{1}{C_\varepsilon} \frac{1}{|\xi|^{\beta/2 + \varepsilon}} \leq A(\xi) \leq C_\varepsilon \frac{1}{|\xi|^{\beta/2 - \varepsilon}}.
    \end{equation}
    %
    In particular, \eqref{dimensionbetasequencecondition} implies that $C^\infty(\TT^d) \subset M(A)$, and we will later show it implies that generic elements of $M(A)$ are `$\beta$ dimensional'.
\end{itemize}
%
We then define $\mathcal{X}$ be the collection of all pairs $(E,\mu) \in \mathcal{E} \times M(A)$, where $\mu$ is a probability measure with $\text{supp}(\mu) \subset E$, and
%
\[ \lim_{|\xi| \to \infty} \frac{|\widehat{\mu}(\xi)|}{A(\xi)} = 0. \]
%
It is easy to see $\mathcal{X}$ is a closed subset of $\mathcal{E} \times M(A)$ under the product topology, and thus if we consider the product metric
%
\[ d_{\mathcal{X}}((E,\mu),(F,\nu)) = \max \left( d_H(E,F), \| \mu - \nu \|_A \right), \]
%
then $(\mathcal{X},d_\mathcal{X})$ is a complete metric space.

\begin{lemma}
    The set of all $(E,\mu)$ with $\mu \in C^\infty(\TT^d)$ is dense in $\mathcal{X}$.
\end{lemma}
\begin{proof}
    We just apply a mollification strategy. Consider $(E,\mu) \in \mathcal{X}$ and $\varepsilon > 0$. For each $\delta > 0$, consider $\mu_\delta = \mu * \phi_\delta$. Then $\mu_\delta \in C^\infty(\TT^d)$, and if $\delta \leq \varepsilon$, then $\mu_\delta$ is supported on $\overline{E_\varepsilon}$, and
    %
    \begin{equation} \label{equation9019412094192041}
        d_H(E,\overline{E_\varepsilon}) \leq \varepsilon.
    \end{equation}
    %
    Since $(E,\mu) \in \mathcal{X}$, there is $N$ depending on $\mu$ such that for $|\xi| \geq N$,
    %
    \[ |\widehat{\mu}(\xi)| \leq \varepsilon A(k). \]
    %
    For $|\xi| \geq N$, we thus find that
    %
    \begin{equation} \label{equation12}
        |\widehat{\mu_\delta}(\xi) - \widehat{\mu}(\xi)| = |\widehat{\mu}(k)||\widehat{\phi_\delta}(\xi) - 1| \leq 2 |\widehat{\mu}(k)| \leq 2\varepsilon A(\xi).
    \end{equation}
    %
    On the other hand, for suitably small $\delta > 0$, \eqref{approximationtoidentitypointwiseconvergence} implies that for $|\xi| \leq N$,
    %
    \[ |\widehat{\phi_\delta}(\xi) - 1| \leq \varepsilon A(\xi). \]
    %
    But this implies that for $|\xi| \leq N$,
    %
    \begin{equation} \label{equation124}
        |\widehat{\mu_\delta}(\xi) - \widehat{\mu}(\xi)| = |\widehat{\mu}(\xi)| |\widehat{\phi_\delta}(\xi) - 1| \leq \varepsilon A(\xi).
    \end{equation}
    %
    Thus we conclude that for suitably small $\delta$, $\| \widehat{\mu_\delta} - \widehat{\mu} \|_A \leq 2 \varepsilon$. But combining \eqref{equation9019412094192041}, \eqref{equation12}, and \eqref{equation124}, we conclude
    %
    \[ d_{\mathcal{X}}((E,\mu), (\overline{E_\varepsilon}, \mu_\delta)) \leq 2 \varepsilon. \]
    %
    Since $\varepsilon > 0$ was arbitrary, this completes the proof.
\end{proof}

\begin{comment}

\begin{lemma}
    For quasi-all $(E,\mu) \in \mathcal{X}$, $\text{supp}(\mu) = E$.
\end{lemma}
\begin{proof}
    For each closed set $K \subset \TT^d$ with nonempty interior, let $A(K)$ be the family of all $(E,\mu) \in X$ such that $E \cap K \neq \emptyset$ and $\mu(K) = 0$. The set $A(K)$ is clearly closed in $X$. Moreover, this set is nowhere dense; Fix $(E,\mu) \in A(K)$ and $\varepsilon > 0$. Then we can find a smooth probability density $\psi \in C^\infty(\TT^d)$ supported on $K^\circ \cap E_\varepsilon$. We then define $\mu_\varepsilon = (1 - \varepsilon) \mu + \varepsilon \psi$. Now
    %
    \[ \| \mu - \mu_\varepsilon \|_A \leq \varepsilon \left( \| \mu \|_A + \| \psi \|_A \right) \lesssim \varepsilon. \]
    %
    Moreover, $\mu_\varepsilon$ is supported on $\overline{E_\varepsilon}$, so
    %
    \[ d_X((E,\mu), (\overline{E_\varepsilon}, \mu_\varepsilon)) \lesssim \varepsilon. \]
    %
    If we let $A = \bigcup_{n = 1}^\infty A(K_n)$, where $\{ K_n \}$ is the family of all closed cubes in $\TT^d$ whose corners have rational coordinates, then quasi-all $(E,\mu) \in X$ belong to $A^c$. But $A^c$ is precisely the family of pairs $(E,\mu)$ with $\text{supp}(\mu) = E$.
\end{proof}

\end{comment}

It is a general heuristic that quasi-all sets are as `thin as possible' with respect to the Hausdorff metric. In particular, we should expect the Hausdorff dimension and Fourier dimension of a generic element of $\mathcal{X}$ to be as low as possible. For each $(E,\mu) \in \mathcal{X}$, the condition that $\mu \in M(A)$, combined with \eqref{dimensionbetasequencecondition} implies that $\fordim(\mu) \geq \beta$, so we might expect the quasi-all $\mu \in M(A)$ have Fourier dimension \emph{equal to} $\beta$. Since the Hausdorff dimension of a measure is an upper bound for the Fourier dimension, it suffices to show that quasi-all $\mu \in M(A)$ have Hausdorff dimension at most $\beta$.

\begin{lemma}
    For quasi-all $(E,\mu) \in \mathcal{X}$, $E$ is a Salem set of dimension $\beta$.
\end{lemma}
\begin{proof}
    We shall assume $\beta < d$ in the proof, since the case $\beta = d$ is trivial. For each $\alpha > \beta$ and $\delta, s > 0$, and let $A(\alpha,\delta,s) = \{ (E,\mu) \in \mathcal{G}: H^\alpha_\delta(E) < s \}$. Then $A(\alpha,\delta,s)$ is an open set, and
    %
    \[ \bigcap_{n = 1}^\infty \bigcap_{m = 1}^\infty \bigcap_{k = 1}^\infty A(\beta + 1/n, 1/m, 1/k) \]
    %
    is precisely the family of $(E,\mu) \in \mathcal{X}$ such that $E$ has Hausdorff dimension $\beta$. Certainly any $E$ in this family must have $H^\alpha(E) = 0$ for all $\alpha > \beta$, so $\hausdim(E) \leq \beta$. But the condition that $\mu \in M(A)$ implies $\fordim(\mu) \geq \beta$. Thus
    %
    \[ \beta \leq \fordim(\mu) \leq \fordim(E) \leq \hausdim(E) \leq \beta, \]
    %
    hence all these quantities are equal to $\beta$. Thus it suffices to show that $A(\alpha,\delta,s)$ is dense in $\mathcal{X}$ for $\alpha \in (\beta,d)$ and $\delta, s > 0$.

    Fix $(E,\mu_0) \in \mathcal{X}$, $\alpha \in (\beta,d)$, $\delta > 0$, and $s > 0$, and consider $\varepsilon > 0$. Without loss of generality, we may assume $\mu_0 \in C^\infty(\TT^d)$. Fix some choice of $\alpha_0 \in (\beta,\alpha)$, which will give us an epsilon of room in our argument. Consider a positive integer $N$, set $M$ to be the closest integer to $N^\lambda$, where $\lambda = d/\alpha_0 - 1$, and let $\varepsilon_0 = 1/NM$. Then construct an independent family of random variables $\{ j(i) : i \in [2N]^d \}$, where $j(i)$ is uniformly distributed in $[M]^d$ for each $i \in [2N]^d$. Define a measure $\nu$ such that for each $x \in \TT^d$,
    %
    \[ d\nu(x) = \left( \sum_{i \in [2N]^d} \phi_{\varepsilon_0} \left( x - \frac{i}{2N} - \frac{j(i)}{2NM} \right) \right) d\mu_0(x). \]
    %
    Then define a normalized probability measure $\mu = \nu / \nu(\TT^d)$. The measure $\mu$ is supported on $E$, so, letting $F = \text{supp}(\nu) \cup \{ x_1, \dots, x_K \}$, where $\{ x_1, \dots, x_K \}$ is a $\varepsilon_0$ cover of $E$, we find $d_H(E,F) \leq \varepsilon_0$. In particular, if $N \geq 1/\varepsilon$, then
    %
    \begin{equation} \label{equation19230124574}
        d_H(E,F) \leq \varepsilon_0 \leq \varepsilon.
    \end{equation}
    %
    The set $F$ is covered by $(2N)^d$ radius $\varepsilon_0$ balls, as well as $K$ balls whose radius can be made as small as desired. Thus if $\delta \geq \varepsilon_0$,
    %
    \[ H^\alpha_\delta(F) \leq (2N)^d / (NM)^\alpha \lesssim_d N^{d-\alpha} M^{-\alpha} = N^{d(1 - \alpha/\alpha_0)}. \]
    %
    In particular, for any fixed $\delta > 0$, as $N \to \infty$, $H^\alpha_\delta(F) \to 0$, so for sufficiently large $N$, $H^\alpha_\delta(F) \leq s$. For such $N$, it thus follows that $(\mu,F) \in A(\alpha,\delta,s)$. Provided we can show for suitably large $N$, there exists a choice of the $j(i)$, such that the resultant measure $\mu_0$ satisfies $\| \mu_0 - \mu \|_{M(A)} \leq \varepsilon$, then we will have shown that $d_{\mathcal{X}}((E,\mu_0),(F,\mu)) \leq \varepsilon$, which will complete the proof since $\varepsilon$ was arbitrary. To accomplish this, we employ some standard calculations controlling the Fourier series of $\mu$, proved in Theorem \ref{randomFourierTheorem} of the Appendix to this paper.

    Applying Theorem \ref{randomFourierTheorem} with our choice of $N$ and $M$, we know that for any $\varepsilon_1$, there exists a constant $C$ and an integer $N_0$, both depending only on $\mu_0$, $d$, and $\varepsilon_1$, such that for $N \geq N_0$, and for $|\xi| \leq (NM)^2 = N^{2d/\alpha_0}$,
    %
    \begin{equation} \label{equation1092490129012}
        |\widehat{\mu}(\xi) - \widehat{\mu_0}(\xi)| \leq C N^{-d/2} \log(N)^{1/2}.
    \end{equation}
    % N^{-d/2} = |\xi|^{-\beta/2}
    % This bound works up to |\xi| = N^{d/\beta}.
    % (NM)^{1 + \varepsilon} = N^{(d/\alpha)(1 + \varepsilon)}
    and such that for $|\xi| \geq \max(C,N^{(d/\alpha_0)(1 + \varepsilon_1)})$,
    %
    \begin{equation} \label{equation192401092}
        |\widehat{\mu}(\xi)| \leq |\xi|^{-d/2}.
    \end{equation}
    %
    Fix $\alpha_1 \in (\beta,\alpha_0)$. Since $(E,\mu_0) \in \mathcal{X}$, there exists $K$ such that for $|\xi| \geq K$,
    %
    \begin{equation} \label{equation192391204129}
        |\widehat{\mu_0}(\xi)| \leq (\varepsilon/2) A(\xi).
    \end{equation}
    %
    If $\varepsilon_1$ is chosen such that $(d/\alpha_0)(1 + \varepsilon_1) = d/\alpha_1$, and if for the resultant constant $C$, we have $N \geq C^{\alpha_1/d}$, then \eqref{equation192401092} implies that for $|\xi| \geq N^{d/\alpha_1}$,
    %
    \begin{equation} \label{equation59239291}
        |\widehat{\mu}(\xi)| \leq |\xi|^{-d/2} \lesssim_{\alpha_1} A(\xi) |\xi|^{\alpha_1/2-d/2} \leq A(\xi) N^{d/2(1 - d/\alpha_1)}.
    \end{equation}
    %
    In particular, since the implicit constants in \eqref{equation59239291} do not depend on $N$, we can take $N$ sufficiently large to annihilate the implicit constants. Thus we conclude from \eqref{equation59239291} that for sufficiently large $N$ depending only on $\alpha_1$, the sequence $A$, $\mu_0$, $d$, and $\varepsilon$, if $|\xi| \geq N^{d/\alpha_1}$
    %
    \begin{equation} \label{equation124901290}
        |\widehat{\mu(\xi)}| \leq (\varepsilon/2) A(\xi).
    \end{equation}
    %
    Combining \eqref{equation192391204129} and \eqref{equation124901290}, we conclude that for $|\xi| \geq N^{d/\alpha_1}$,
    %
    \begin{equation} \label{equation129012904}
        |\widehat{\mu_0}(\xi) - \widehat{\mu}(\xi)| \leq \varepsilon A(\xi).
    \end{equation}
    %
    Conversely, if $|\xi| \leq N^{d/\alpha_1}$, then we pick $\alpha_2 \in (\beta,\alpha_1)$, and apply \eqref{equation1092490129012} to conclude
    %
    \begin{equation} \label{equation1290312901}
    \begin{split}
        |\widehat{\mu_0}(\xi) - \widehat{\mu}(\xi)| &\leq C N^{-d/2} \log(N)^{1/2}\\
        &\leq [C N^{d/2(\alpha_2/\alpha_1 - 1)} \log(N)^{1/2}] \cdot |\xi|^{-\alpha_2/2}\\
        &\lesssim_{\alpha_2} [C N^{d/2(\alpha_2/\alpha_1 - 1)} \log(N)^{1/2}] \cdot A(\xi).
    \end{split}
    \end{equation}
    %
    Since implicit constants here also do not depend on $N$, if $N$ is taken sufficiently large, we conclude from \eqref{equation1290312901} that for $|\xi| \leq N^{d/\alpha_1}$,
    %
    \begin{equation} \label{equation1290410951291290940394073490649035}
        |\widehat{\mu_0}(\xi) - \widehat{\mu}(\xi)| \leq \varepsilon A(\xi).
    \end{equation}
    %
    Combining \eqref{equation129012904} and \eqref{equation1290410951291290940394073490649035} shows that
    %
    \[ \| \mu_0 - \mu \|_{M(A)} \leq \varepsilon, \]
    %
    which completes the argument.
\end{proof}

All that now remains is to show that quasi-all elements of $\mathcal{X}$ avoid the given set $Z$; just as with the proof above, we can reduce our calculations to discussing only a couple scales at once, which allows us to focus solely on the discrete, quantitative question at the heart of the problem.

\section{Random Avoiding Sets}

Fix $W \subset \TT^d$ with $\lowminkdim(W) \leq \alpha$. Then
%
\[ \liminf_{\varepsilon \to 0} \log_\varepsilon |W(\varepsilon)| \leq \alpha. \]
%
Thus there exists arbitrarily small $\varepsilon > 0$ and arbitrarily small $\delta > 0$ such that
%
\[ |W_\varepsilon| \leq \varepsilon^{nd - \alpha - \delta}. \]

\begin{proof}
    Let $X_1, \dots, X_N$ be uniformly distributed on $\TT^d$. For each $i \in \{ 1, \dots, N \}^n$ such that $i_1, \dots, i_n$ are distinct, consider the random vector $X_i = (X_{i_1}, \dots, X_{i_n})$. Then $X_i$ is uniformly distributed on $\TT^{nd}$, and so
    %
    \[ \PP(d(X_i,W) \leq \varepsilon) \leq \varepsilon^{nd - \alpha - \delta}. \]
    %
    If $M$ denotes the number of indices $i$ such that $d(X_i,W) \leq \varepsilon$, then by linearity of expectation we conclude that $\EE(M) \leq N^n \varepsilon^{nd - \alpha - \delta}$. Applying Markov's inequality, we conclude that
    %
    \[ \PP(M \geq 4 N^n \varepsilon^{nd - \alpha - \delta}) \leq 1/4. \]
    %
    Now consider the measure $\nu = \delta_{X_1} + \dots + \delta_{X_N}$. For each $k \in \ZZ^d$,
    %
    \[ \widehat{\nu}(k) = e^{2 \pi i k \cdot X_1} + \dots + e^{2 \pi i k \cdot X_N}. \] 
    %
    Thus $\widehat{\nu}(k)$ is the sum of $N$ bounded independent random variables, so we can apply Hoeffding's inequality to conclude that for each $t \geq 0$
    %
    \[ \PP(|\widehat{\nu}(k)| \geq t) \leq 2 \exp ( - 2 t^2 / N). \]
    %
    A union bound allows us to conclude that
    %
    \[ \PP \left( \text{for all $|k| \leq R$, $|\widehat{\nu}(k)| \leq t$} \right) \geq 1 - 2^{d+1} R^d \exp ( - 2 t^2 / N). \]
    %
    Thus provided
    %
    \begin{equation} \label{probabilitybound}
        2^{d+1} R^d \exp(-2t^2/N) \leq 1/4,
    \end{equation}
    %
    we conclude that there exists a choice of $X_1, \dots, X_N \in \TT^d$ such that if
    %
    \[ I = \{ i \in \{ 1, \dots, N \}^n : i_1, \dots, i_n\ \text{are distinct and}\ d(X_i,W) \leq \varepsilon \}, \]
    %
    then $\#(I) \leq 4 N^n \varepsilon^{nd - \alpha - \delta}$, and for all $|k| \leq R$, $|\widehat{\nu}(k)| \leq t$. In particular, if we choose
    %
    \[ N = \lfloor \varepsilon^{-\frac{nd - \alpha - \delta}{n - 1/2}} \rfloor, \]
    %
    choose $R = \varepsilon^{-10}$, and choose
    %
    \[ t = 5d^{1/2} \cdot \varepsilon^{- \frac{nd - \alpha - \delta}{2n - 1}} \log(1/\varepsilon)^{1/2}, \]
    %
    then using the fact that $\varepsilon \leq 1/2$, we conclude that \eqref{probabilitybound} is satisfied. The standard $(L^1,L^\infty)$ bound for the Fourier transform then implies that for each $k \in \ZZ^d$,
    %
    \[ \left\| \sum_{i \in I} \widehat{\delta_{X_{i_1}}} \right\|_{L^\infty(\ZZ^d)} \leq \#(I) \leq 4 N^n \varepsilon^{nd - \alpha - \delta} \leq 4 N^{1/2} \leq 4 \varepsilon^{- \frac{nd - \alpha - \delta}{2n - 1}}. \]
    %
    Define a probability measure
    %
    \[ \mu = \frac{1}{N - \#(I)} \left( \nu - \sum_{i \in I} \delta_{X_{i_1}} \right), \]
    %
    If $\varepsilon$ is sufficiently small, so that $N$ is sufficiently large, then for each $k \in \ZZ^d$ with $|k| \leq R = \varepsilon^{-10}$,
    %
    \begin{align*}
        |\widehat{\mu}(k)| &\leq \frac{1}{N - 4N^{1/2}} \left( 5d^{1/2} \varepsilon^{- \frac{nd - \alpha - \delta}{2n - 1}} \log(1/\varepsilon)^{1/2} +  4 \varepsilon^{- \frac{nd - \alpha - \delta}{2n - 1}} \right)\\
        &\leq 9.5 d^{1/2} N^{-1} \varepsilon^{- \frac{nd - \alpha - \delta}{2n - 1}} \log(1/\varepsilon)^{1/2} \leq 10 d^{1/2} \varepsilon^{\frac{nd - \alpha - \delta}{2n - 1}} \log(1/\varepsilon)^{1/2}. \qedhere
    \end{align*}
\end{proof}

Following through with the proof leads to a set with Fourier dimension
%
\[ \frac{nd - \alpha}{n - 1/2} \]
%
Which isn't quite enough for what we want.



\section{Appendix: Random Segments of Measures}

Several times, in this paper, we rely on a simple random segmentation applied to a given smooth measure. In this appendix, we collect the properties of this segmentation that are used repeatedly.

\begin{theorem} \label{randomFourierTheorem}
    Let $\mu_0$ be a smooth measure on $\TT^d$, and let $\phi$ be a mollifier with the properties described in Section \ref{notationSection}. Consider positive integers $N, M$, and set $\varepsilon = 1/NM$. Consider an independant family of random variables $\{ j(i) : i \in [2N]^d \}$, where $j(i)$ is uniformly distributed in $[M]^d$ for each $i$, and then define a smooth measure $\nu$ such that for each $x \in \TT^d$,
    %
    \[ d\nu(x) = \left[ \sum_{i \in [2N]^d} \phi_\varepsilon \left( x - \frac{i}{2N} - \frac{j(i)}{2NM} \right) \right]\; d\mu_0(x). \]
    %
    If we define a probability measure $\mu = \nu / \nu(\TT^d)$, then there exists an integer $N_0$, depending solely on $\mu_0$ and $d$, such that for $N \geq N_0$, the following holds:
    %
    \begin{itemize}
        \item[(A)] For each $\varepsilon > 0$, there exists a constant $C$, depending solely on $\mu_0$, $d$, and $\varepsilon$, such that if $|\xi| \geq \max(C, (NM)^{1+\varepsilon})$, then $|\widehat{\mu}(\xi)| \leq |\xi|^{-d/2}$.

        \item[(B)] Define
        %
        \[ D = \{ k \in \ZZ^d : |k| \leq (NM)^2 \}. \]
        %
        Then there exists a constant $C$, depending only on $\mu_0$ and $d$, such that with probability greater than or equal to $1/2$,
        %
        \[ \| \widehat{\mu_0} - \widehat{\mu} \|_{L^\infty(D)} \leq C N^{-d/2} \log(NM). \]
    \end{itemize}
\end{theorem}

We split our proof of the theorem into several, more managable lemmas.

\begin{lemma} \label{nuboundlemma}
    There exists a constant $C$ depending on $\mu_0$ and $d$ such that
    %
    \[ \PP \left( |\nu(\TT^d) - (2N)^d | \geq C N^{d/2 - 1} \right) \leq 1/10. \]
\end{lemma}
\begin{proof}
    For each $i \in [2N]^d$, and $j \in [M]^d$, write
    %
    \begin{equation}
    \begin{split}
        Y(i,j) &= \int_{\TT^d} \phi_\varepsilon \left( x - \frac{i}{2N} - \frac{j}{2NM} \right)\; d\mu_0(x)\\
        &= \int_{\TT^d} \phi_\varepsilon(x)\; d\mu_0 \left(x + \frac{i}{2N} + \frac{j}{2NM} \right).
    \end{split}
    \end{equation}
    %
    Note that
    %
    \begin{equation} \label{equation555326}
        \nu(\TT^d) = \sum_{a \in [2N]^d} Y(a,X_a).
    \end{equation}
    %
    For each choice $j_1, j_2 \in [M]^d$, $|j_1/2NM - j_2/2NM| \lesssim_d 1/N$. Thus H\"{o}lder's inequality, and the mean value theorem applied to $\mu$ imply that
    %
    \begin{equation} \label{equation774435}
    \begin{split}
        |Y(i,j_1) &- Y(i,j_2)| \lesssim_d N^{-1} \| \phi_\varepsilon \|_{L^1(\TT^d)} \| \nabla \mu_0 \|_{L^\infty(\TT^d)} \lesssim_{\mu_0} N^{-1}.
    \end{split}
    \end{equation}
    %
    In particular, this implies $|Y(i,X_i) - \EE(Y(i,X_i))| \lesssim_{d,\mu_0} N^{-1}$. The family of random variables $\{ Y(i,X_i) : i \in [2N]^d \}$ are independant, so we can apply Hoeffding's inequality and apply \eqref{equation555326} to conclude that there exists a constant $C$ depending only on $\mu_0$ and $d$, such that for any $t \geq 0$,
    %
    \begin{equation} \label{equation6653921}
        \PP \left( |\nu(\TT^d) - \EE(\nu(\TT^d))| \geq t \right) \leq 2 \exp \left( - \frac{5 t^2}{C^2 N^{d-2}} \right).
    \end{equation}
    %
    However, \eqref{equation5550002352124124512} implies
    %
    \begin{equation} \label{equation9102490120}
        \EE(\nu(\TT^d)) = \frac{(2NM)^d}{M^d} = (2N)^d,
    \end{equation}
    %
    Thus setting $t = C N^{d/2 - 1}$ completes the proof.
\end{proof}

\begin{lemma} \label{lemma532952}
    There exists a constant $C$, depending on $\mu_0$ and $d$, such that
    %
    \[ \PP \left( \| \widehat{\nu} - (2N)^d \widehat{\mu_0} \|_{L^\infty(D)} \geq C N^{d/2} \log(NM)^{1/2} \right) \leq 1/10. \]
\end{lemma}
\begin{proof}
    For each $i \in [2N]^d$, define $\nu_i$ to be the smooth measure such that for each $x \in \TT^d$,
    %
    \[ d\nu_i(x) = \phi_\varepsilon \left( x - \frac{i}{2N} - \frac{j(i)}{2NM} \right) d\mu_0(x). \]
    %
    Then for each $\xi \in \ZZ^d$, define $X_{i \xi} = \widehat{\nu_i}(\xi)$. For each $i$ and $\xi$, the standard $(L^1,L^\infty)$ bound on the Fourier transform implies
    %
    \begin{equation} \label{equation123102}
    \begin{split}
        |X_{i\xi}| \leq \nu_i(\TT^d) \leq \| \mu_0 \|_{L^\infty(\TT^d)}.
    \end{split}
    \end{equation}
    %
    Thus the variables $|X_{i \xi}|$ are uniformly bounded by a constant depending only on $\mu_0$. For a fixed $\xi$, the family of random variables $\{ X_{i \xi} : i \in [2N]^d \}$ are independant and moreover,
    %
    \begin{equation} \label{equation998321521422}
        \sum_{i \in [2N]^d} X_{i \xi} = \widehat{\nu}(\xi).
    \end{equation}
    %
    Thus Hoeffding's inequality together with \eqref{equation123102} and \eqref{equation998321521422} imply that
    %
    \[ \PP \left( \left| \widehat{\nu}(\xi) - \EE(\widehat{\nu}(\xi)) \right| \geq t \right) \leq 2 \exp \left( - \frac{t^2}{2^{d-1} N^{d} \| \mu_0 \|_{L^\infty(\TT^d)}^2} \right) \]
    %
    for each $t \geq 0$. In particular, applying a union bound over all $|\xi| \leq 10 NM$, we conclude that there exists a constant $C$, depending only on $d$ and $\mu_0$, such that for each $t \geq 0$,
    %
    \[ \PP \left( \| \widehat{\nu} - \EE(\widehat{\nu}) \|_{L^\infty(D)} \geq t \right) \leq \exp \left( C \log(NM) - \frac{3 t^2}{C N^d} \right). \]
    %
    We can make $C$ as large as we want, so in particular, we assume $C \geq 1$. Noting $\EE(\widehat{\nu}) = (2N)^d \widehat{\mu_0}$ and setting $t = C N^{d/2} \log(NM)^{1/2}$ completes the proof.
\end{proof}

We now control the behaviour of $\nu$ at high frequencies.

\begin{lemma} \label{lemma6213}
    For any $\varepsilon > 0$, there exists a constant $C$ depending on $\varepsilon$, $d$, and $\mu_0$, such that if $|\xi| \geq \max( C, (NM)^{1 + \varepsilon})$, then $|\widehat{\nu}(\xi)| \leq |\xi|^{-d/2}$.
\end{lemma}
\begin{proof}
    Define a finite measure $\alpha$ such that
    %
    \[ d\alpha(x) = \sum_{i \in [2N]^d} \delta \left( x - \frac{i}{2N} - \frac{j(i)}{2NM} \right). \]
    %
    Then $\nu = (\alpha * \phi_\varepsilon) \mu$, so
    %
    \[ \widehat{\nu} = \left(\widehat{\alpha} \cdot \widehat{\phi_\varepsilon} \right) * \widehat{\mu}. \]
    %
    The standard $(L^1,L^\infty)$ bound for the Fourier transform shows that
    %
    \[ \| \widehat{\alpha} \|_{L^\infty(\ZZ^d)} \leq \alpha(\TT^d) \leq (2N)^d. \]
    %
    Thus for each $\xi \in \ZZ^d$,
    %
    \[ |\widehat{\nu}(\xi)| \lesssim_d N^d \sum_{\eta \in \ZZ^d} |\widehat{\phi_\varepsilon}(\eta)| |\widehat{\mu_0}(\xi-\eta)|. \]
    %
    Since $\mu_0$ is smooth, for any $T > 0$ and $\xi \in \ZZ^d$,
    %
    \begin{equation} \label{equation78234125}
        |\widehat{\mu_0}(\xi)| \lesssim_T |\xi|^{-T}.
    \end{equation}
    %
    If $|\eta| \leq |\xi|/2$, $|\xi - \eta| \geq |\xi|/2$, so \eqref{equation78234125} implies that $|\widehat{\mu_0}(\xi - \eta)| \lesssim_T |\eta|^{-T}$ for all $T > 0$. Combined with the trivial bound $\| \widehat{\phi_\varepsilon} \|_{L^\infty(\ZZ^d)} \leq 1$ we find that
    %
    \[ \sum_{0 \leq |\eta| \leq |\xi|/2} |\widehat{\phi_\varepsilon}(\eta)| |\widehat{\mu_0}(\xi-\eta)| \lesssim_{d,T} \frac{1}{|\xi|^{T-d}}. \]
    %
    Conversely, if $|\eta| \geq 2 |\xi|$, then $|\xi - \eta| \geq |\eta|/2$, so a simple dyadic partition of the sum onto regions where $|\eta| \sim 2^k |\xi|$ using \eqref{equation78234125}, combined with the trivial bound $\| \widehat{\phi_\varepsilon} \|_{L^\infty(\ZZ^d)} \leq 1$ shows that for each $T > d$,
    %
    \[ \sum_{|\eta| \geq 2 |\xi|} |\widehat{\phi_\varepsilon}(\eta)| |\widehat{\mu_0}(\xi-\eta)| \lesssim_{d,T} \frac{1}{|\xi|^{T-d}}. \]
    %
    Finally, if $|\xi|/2 \leq |\eta| \leq 2|\xi|$, we employ the bound
    %
    \[ |\widehat{\phi_\varepsilon}(\xi)| \lesssim_{d,T} \frac{(NM)^T}{|\xi|^T}, \]
    %
    together with the bound $\| \widehat{\mu_0} \|_{L^\infty(\ZZ^d)} \leq 1$, to conclude that
    %
    \[ \sum_{|\xi|/2 \leq |\eta| \geq 2 |\xi|} |\widehat{\phi_\varepsilon}(\eta)| |\widehat{\mu_0}(\xi-\eta)| \lesssim_{d,T} \frac{(NM)^T}{|\xi|^{T-d}} = \frac{1}{|\xi|} \frac{(NM)^T}{|\xi|^{T-3d/2}} \frac{1}{|\xi|^{d/2}}. \]
    %
    If $|\xi| \geq (NM)^{T/(T - 3d/2)} = (NM)^{1 + O(1/T)}$, we conclude that
    %
    \[ \sum_{|\xi|/2 \leq |\eta| \geq 2 |\xi|} |\widehat{\phi_\varepsilon}(\eta)| |\widehat{\mu_0}(\xi-\eta)| \lesssim_{d,T} \frac{1}{|\xi|} \frac{1}{|\xi|^{d/2}}. \]
    %
    Combining the three inequalities we have established, we conclude that for each $\varepsilon > 0$, if $T$ is taken suitably large relative to $\varepsilon$, there exists a constant $C$ depending only on $\mu_0$, $d$, and $\varepsilon$ such that if $|\xi| \geq (NM)^{1 + \varepsilon}$, then
    %
    \[ |\widehat{\nu}(\xi)| \leq \frac{C}{|\xi|} \frac{1}{|\xi|^{d/2}}. \]
    %
    If, in addition, we take $|\xi| \geq C$, then we conclude $|\widehat{\nu}(\xi)| \leq |\xi|^{-d/2}$.
\end{proof}

We are now ready to complete our proof of Theorem \ref{randomFourierTheorem}.

\begin{proof}[Proof of Theorem \ref{randomFourierTheorem}]
    A union bound applied to the results of Lemmas \ref{nuboundlemma} and \ref{lemma532952} imply that there exists a constant $C$, depending solely on $\mu_0$ and $d$, such that with probability greater than $1/2$, we have
    %
    \begin{equation}\label{equation491212}
        |\nu(\TT^d) - (2N)^d| \leq C N^{d/2-1},
    \end{equation}
    %
    and
    %
    \begin{equation}\label{equation1290129}
    \| \widehat{\nu} - (2N)^d \widehat{\mu_0} \|_{L^\infty(D)} \lesssim_{\mu_0,d} N^{d/2} \log(NM)^{1/2}.
    \end{equation}
    %
    But combining \eqref{equation491212} and \eqref{equation1290129}, we conclude that
    %
    \begin{align*}
        \| \widehat{\mu} - \widehat{\mu_0} \|_{L^\infty(D)} &= (2N)^{-d} \| (2N)^d \widehat{\mu} - (2N)^d \widehat{\mu_0} \|_{L^\infty(D)}\\
        &\lesssim_{\mu_0,d} (2N)^{-d} \| \nu(\TT^d) \widehat{\mu} - (2N)^d \widehat{\mu_0} \|_{L^\infty(\TT^d)} + N^{-d/2-1} \\
        &= (2N)^{-d} \| \widehat{\nu} - (2N)^d \widehat{\mu_0} \|_{L^\infty(\TT^d)} + N^{-d/2-1}\\
        &\lesssim_{\mu_0,d} N^{-d/2} \log(NM)^{1/2}. \qedhere
    \end{align*}
    %
    But this implies Property (B). And \eqref{equation491212} implies that for suitably large $N$,
    %
    \begin{equation} \label{equation5291029312}
        \nu(\TT^d) \geq 1.
    \end{equation}
    %
    Lemma \eqref{lemma6213} implies that for each $\varepsilon > 0$, there exists $C$ depending only on $\mu_0$, $d$, and $\varepsilon$ such that if $|\xi| \geq \max(C, (NM)^{1+\varepsilon})$, then
    %
    \begin{equation} \label{equation1249120}
        |\widehat{\nu}(\xi)| \leq |\xi|^{-d/2}.
    \end{equation}
    %
    But then \eqref{equation5291029312} and \eqref{equation1249120} imply that
    %
    \[ |\widehat{\mu}(\xi)| \leq |\widehat{\nu}(\xi)| \leq |\xi|^{-d/2}, \]
    %
    which proves Property (A).
\end{proof}

\begin{thebibliography}{9}

\bibitem{Korner1}
    T.W. K\"{o}rner,
    \textit{Measures on Independent Sets, A Quantitative Version of Rudin's Theorem}.

\bibitem{Korner2}
    T.W. K\"{o}rner,
    \textit{Fourier Transforms of Measures and Algebraic Relations on Their Supports}.

\bibitem{OurPaper}
    Jacob Denson, Malabika Pramanik, Joshua Zahl,
    \textit{Large Sets Avoiding Rough Patterns}.

\bibitem{myThesis}
    Jacob Denson,
    \textit{Cartesian Products Avoiding Patterns}.

\bibitem{Vershynin}
    Roman Vershynin,
    \textit{High Dimensional Probability},
    Cambridge Series in Statistical and Probabilistic Mathematics,
    2018.

\end{thebibliography}

\end{document}